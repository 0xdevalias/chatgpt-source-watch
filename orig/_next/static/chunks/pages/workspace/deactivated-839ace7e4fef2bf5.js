(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6161],{31493:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return Z}});var t=s(39827),c=s(10388),i=s(33925),r=s(65455),o=s(28138),l=s(13038),n=s(24668),d=s(18405),u=s(78e3),p=s(4635),f=s(61888),h=s(38540),v=s.n(h),m=s(12366),b=s(70079),x=s(9063),k=s(84692),j=s(68498),w=s(65375),g=s(60645),M=s(16244),N=s(33514),W=s(84395),y=s(35250);function O(e,a){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);a&&(t=t.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),s.push.apply(s,t)}return s}function P(e){for(var a=1;a<arguments.length;a++){var s=null!=arguments[a]?arguments[a]:{};a%2?O(Object(s),!0).forEach(function(a){(0,t.Z)(e,a,s[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):O(Object(s)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(s,a))})}return e}function S(){var e;let a=(0,u.aF)(),s=(0,n.t)(),{data:t}=(0,n.rk)(),{0:h,1:j}=(0,b.useState)(!1),O=(0,m.useRouter)(),S=null==t?void 0:t.accountItems,Z=(0,W.p5)(null!==(e=null==s?void 0:s.id)&&void 0!==e?e:""),_=null==s?void 0:s.id,C=null==S?void 0:S.find(e=>e.id===_),B=(null==s?void 0:s.isOwnerOfAccount())&&s.isTeam()&&!s.hasPaidSubscription(),E=(null==s?void 0:s.isOwnerOfAccount())&&s.isTeam()&&s.hasPaidSubscription(),T=null==S?void 0:S.filter(e=>!e.isDeactivated()),A=(0,x.Z)(),F=(0,b.useCallback)(()=>{j(!0),d.vm.setPurchaseWorkspaceData({minimumSeats:Math.max(Z,N.Y6),existingAccount:C}),j(!1)},[Z,C]),U=async()=>{j(!0);try{let e=await l.Z.fetchCustomerPortalUrl();O.push(e.url),j(!1)}catch(e){j(!1),r.m.warning(A.formatMessage(D.unableToOpenStripeDashboard),{hasCloseButton:!0})}};return null!=s&&C&&T?(0,y.jsx)(M.Z,{type:"success",onClose:f.noop,isOpen:null!=s||null!=t,title:(0,y.jsx)("span",{className:"text-lg",children:(0,y.jsx)(k.Z,P({},D.workspaceDeactivated))}),children:(0,y.jsxs)("div",{className:"flex flex-col items-center justify-center gap-4",children:[(0,y.jsxs)("div",{className:"flex w-full items-center gap-4",children:[(0,y.jsx)(w.B0,{src:C.data.profilePictureUrl,size:"large"}),(0,y.jsx)("div",{className:"font-medium",children:C.data.name})]}),(0,y.jsxs)("div",{children:[(0,y.jsx)("h3",{className:"mb-2 text-base font-bold",children:(0,y.jsx)(k.Z,P({},D.workspaceDeactivated))}),(0,y.jsxs)("ul",{className:"list-disc pl-5",children:[(0,y.jsx)("li",{className:"mb-1",children:(0,y.jsx)(k.Z,P({},D.chatHistoryUnavailable))}),(0,y.jsx)("li",{children:(0,y.jsx)(k.Z,P({},D.otherWorkspacesAvailable))})]})]}),B&&(0,y.jsxs)("div",{className:"flex w-full flex-col",children:[(0,y.jsx)("p",{children:(0,y.jsx)(k.Z,P({},D.purchaseNewSubscription))}),(0,y.jsx)(i.mH,{className:"m-auto mt-2 w-full",loading:h,onClick:F,children:(0,y.jsx)(k.Z,P({},D.purchaseNewSubscriptionButton))})]}),E&&(0,y.jsxs)("div",{className:"flex w-full flex-col",children:[(0,y.jsx)("p",{children:(0,y.jsx)(k.Z,P({},D.resolveOutstandingInvoice))}),(0,y.jsx)(i.mH,{className:"m-auto mt-2 w-full",loading:h,onClick:U,children:(0,y.jsx)(k.Z,P({},D.manageSubscriptionButton))})]}),(0,y.jsx)(g.b,{}),(0,y.jsx)("div",{className:"w-full justify-center",children:T.length>0?(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("h3",{className:"mb-2 text-base font-bold",children:(0,y.jsx)(k.Z,P({},D.selectWorkspace))}),(0,y.jsx)(c.b,{data:T})]}):(0,y.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,y.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,y.jsx)("h3",{className:"text-base font-bold",children:(0,y.jsx)(k.Z,P({},D.createPersonalWorkspace))}),(0,y.jsx)(k.Z,P({},D.deactivatedWorkspaceReason))]}),(0,y.jsxs)("div",{className:"flex w-full items-center gap-4",children:[a&&a.picture&&(0,y.jsx)(v(),{alt:"Profile",src:a.picture,width:w.EF.medium,height:w.EF.medium,className:"flex items-center justify-center rounded-sm"}),(0,y.jsx)("span",{className:"font-medium",children:a&&(0,y.jsx)("span",{children:a.name})})]}),(0,y.jsx)("div",{className:"ml-auto",children:(0,y.jsx)(i.mH,{title:A.formatMessage(D.createPersonalWorkspaceButton),loading:h,onClick:async()=>{j(!0),await l.Z.upsertPersonalWorkspace(),(0,n.eV)(o.b),(0,p.M)()},color:"primary",className:"ml-4"})})]})})]})}):(0,y.jsx)(y.Fragment,{})}let D=(0,j.vU)({workspaceDeactivated:{id:"deactivatedWorkspaceModal.workspaceDeactivated",defaultMessage:"Your workspace has been deactivated"},workspaceDeactivatedDesc:{id:"deactivatedWorkspaceModal.workspaceDeactivatedDesc",defaultMessage:"Your workspace has been deactivated."},chatHistoryUnavailable:{id:"deactivatedWorkspaceModal.chatHistoryUnavailable",defaultMessage:"Your chat history and settings will not be available."},otherWorkspacesAvailable:{id:"deactivatedWorkspaceModal.otherWorkspacesAvailable",defaultMessage:"You will still be able to use ChatGPT with the other workspaces associated with this email address."},selectWorkspace:{id:"deactivatedWorkspaceModal.selectWorkspace",defaultMessage:"Select a workspace to continue"},createPersonalWorkspace:{id:"deactivatedWorkspaceModal.createPersonalWorkspace",defaultMessage:"Create a personal workspace to continue"},deactivatedWorkspaceReason:{id:"deactivatedWorkspaceModal.deactivatedWorkspaceReason",defaultMessage:"Because your workspace has been deactivated, you need to create a personal workspace to continue using ChatGPT."},profileAlt:{id:"deactivatedWorkspaceModal.profileAlt",defaultMessage:"Profile"},createPersonalWorkspaceButton:{id:"deactivatedWorkspaceModal.createPersonalWorkspaceButton",defaultMessage:"Create a personal workspace"},unableToOpenStripeDashboard:{id:"deactivatedWorkspaceModal.unableToOpenStripeDashboard",defaultMessage:"Unable to open Stripe dashboard"},purchaseNewSubscription:{id:"deactivatedWorkspaceModal.purchaseNewSubscription",defaultMessage:"You can reactivate your workspace by purchasing a new subscription."},purchaseNewSubscriptionButton:{id:"deactivatedWorkspaceModal.purchaseNewSubscriptionButton",defaultMessage:"Purchase subscription"},resolveOutstandingInvoice:{id:"deactivatedWorkspaceModal.resolveOutstandingInvoice",defaultMessage:"You can reactivate your workspace by resolving an outstanding invoice on your subscription."},manageSubscriptionButton:{id:"deactivatedWorkspaceModal.manageSubscriptionButton",defaultMessage:"Manage subscription"}});function Z(){let e=(0,u.ec)(u.F_.workspaces),a=(0,n.t)(),s=(0,u.ec)(u.F_.workspaceId),t=e.find(e=>e.id===s),c=(0,m.useRouter)();return((0,b.useEffect)(()=>{null==a||!a.data||t&&t.deactivated||c.push("/")},[a,t,c]),null==a||!a.data||t&&t.deactivated)?(0,y.jsx)(S,{}):(0,y.jsx)("div",{})}},64788:function(e,a,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/workspace/deactivated",function(){return s(31493)}])}},function(e){e.O(0,[2888,9774,179],function(){return e(e.s=64788)}),_N_E=e.O()}]);
//# sourceMappingURL=deactivated-839ace7e4fef2bf5.js.map