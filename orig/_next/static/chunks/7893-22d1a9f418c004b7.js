"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7893],{17893:function(e,t,n){n.r(t),n.d(t,{__N_SSP:function(){return ng},default:function(){return nv}});var r,i,o,a,s,l,c,u,d,p,m,f,h,g=n(37097),v=n(50134),x=n(6939),b=n(36112),y=n(4399),j=n.n(y),w=n(82256),P=n(61302),N=n(3554),k=n(21120),T=n(14711),z=n(35250);function O(e){var t,n=e.gizmoId,r=(0,g.b9)(n,!0).data,i=(t=(0,v.Z)(j().mark(function e(){return j().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.U.postGizmoCancelAppeal(n);case 2:case"end":return e.stop()}},e)})),function(){return t.apply(this,arguments)});return(0,z.jsx)(k.Z,{isOpen:!0,onClose:function(){},primaryButton:(0,z.jsx)(N.ZP.Button,{title:"Cancel appeal",color:"primary",onClick:i}),type:"warning",children:(0,z.jsxs)("div",{className:"flex flex-col gap-2 text-sm",children:[(0,z.jsx)("h2",{className:"text-lg font-semibold",children:"Reviewing your appeal"}),(0,z.jsxs)("p",{children:["During the review you can continue using “",null==r?void 0:r.gizmo.display.name,"” as your private GPT, but won’t be able to update it or share it with others."]})]})})}var C=n(90038),I=n(21389),_=I.Z.a(a||(a=(0,C.Z)(["bold underline"])));function S(e){var t=e.isFlaggedBrandName,n=e.onClose;return(0,z.jsx)(k.Z,{title:"Your changes couldn’t be published",isOpen:!0,onClose:n,closeButton:(0,z.jsx)(N.ZP.CloseButton,{onClose:n}),primaryButton:(0,z.jsx)(N.ZP.Button,{title:"Continue",color:"primary",onClick:n}),type:"warning",children:(0,z.jsx)("div",{className:"flex flex-col gap-2 text-sm",children:t?(0,z.jsxs)("p",{children:["Your GPT’s name is restricted for public sharing. If this is your organization’s name, please verify your website via the"," ",(0,z.jsx)(_,{href:"/#settings/BuilderProfile",children:"Builder profile in Settings"}),"."]}):(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)("p",{children:"Your GPT isn’t ready for public sharing yet. Usually, it’s a quick fix."}),(0,z.jsx)("p",{children:"Here’s what you can do"}),(0,z.jsxs)("ul",{className:"list-disc pl-5",children:[(0,z.jsxs)("li",{children:[(0,z.jsx)("b",{children:"Review your info:"})," Check that your description, name, and profile picture meet our"," ",(0,z.jsx)(_,{target:"_blank",href:"https://openai.com/brand",rel:"noreferrer",children:"brand"})," ","and"," ",(0,z.jsx)(_,{target:"_blank",href:"https://openai.com/policies/usage-policies",rel:"noreferrer",children:"usage"})," ","guidelines."]}),(0,z.jsxs)("li",{children:[(0,z.jsx)("b",{children:"Share again:"})," Once updated, go ahead and share your GPT."]})]}),(0,z.jsxs)("p",{children:["Concerns? Your feedback is welcome"," ",(0,z.jsx)(_,{target:"_blank",href:"https://forms.gle/qXd1PjZmuJYhvxow5",rel:"noreferrer",children:"here"})," ","and helps us improve."]}),(0,z.jsx)("p",{children:"Feel free to use your GPT privately for now by publishing to “only me”."})]})})})}var G=n(52336),M=n(63866),E=n(4748),D=n(7144),A=n(1890),Z=n(19954),L=n(73582),U=n(88654),R=n(83380),V=n(28818),q=n(70079),F=n(51533),W=n(69101),B=n(13135),H=n(19841),K=n(61888),J=n(10721),Y=n.n(J),Q=n(70671),X=n(80459),$=n(11591),ee=n(91559),et=n(5063),en=n(32004),er=n(1703),ei=n(998),eo=n(40103);function ea(e){var t=e.content,n=e.button,r=e.onClick;return(0,z.jsxs)("div",{className:"flex rounded-lg border border-token-border-medium text-sm hover:cursor-pointer",onClick:r,children:[(0,z.jsx)("div",{className:"h-9 grow px-3 py-2",children:t}),(0,z.jsx)("div",{className:"w-px bg-token-border-medium"}),n]})}var es=n(94968);function el(e){var t=e.onSelectExample,n=(0,Q.Z)(),r=(0,q.useRef)(null);return(0,z.jsxs)("select",{onChange:function(e){"label"!==e.target.value&&(t(eu[parseInt(e.target.value)].spec),r.current.value="label")},className:"h-8 rounded-lg border border-token-border-medium bg-transparent px-2 py-0 text-sm",ref:r,children:[(0,z.jsx)("option",{value:"label",children:n.formatMessage(ec.examples)}),eu.map(function(e,t){return(0,z.jsx)("option",{value:t,children:n.formatMessage(e.displayName)},t)})]})}var ec=(0,es.vU)({examples:{id:"gizmo.actions.examples",defaultMessage:"Examples"},weatherExampleTitle:{id:"gizmo.actions.weatherExampleTitle",defaultMessage:"Weather (JSON)"},petStoreExampleTitle:{id:"gizmo.actions.petStoreExampleTitle",defaultMessage:"Pet Store (YAML)"},blankExampleTitle:{id:"gizmo.actions.blankExampleTitle",defaultMessage:"Blank Template"}}),eu=[{displayName:ec.weatherExampleTitle,spec:JSON.stringify({openapi:"3.1.0",info:{title:"Get weather data",description:"Retrieves current weather data for a location.",version:"v1.0.0"},servers:[{url:"https://weather.example.com"}],paths:{"/location":{get:{description:"Get temperature for a specific location",operationId:"GetCurrentWeather",parameters:[{name:"location",in:"query",description:"The city and state to retrieve the weather for",required:!0,schema:{type:"string"}}],deprecated:!1}}},components:{schemas:{}}},null,2)},{displayName:ec.petStoreExampleTitle,spec:'# Taken from https://github.com/OAI/OpenAPI-Specification/blob/main/examples/v3.0/petstore.yaml\n\nopenapi: "3.0.0"\ninfo:\n  version: 1.0.0\n  title: Swagger Petstore\n  license:\n    name: MIT\nservers:\n  - url: https://petstore.swagger.io/v1\npaths:\n  /pets:\n    get:\n      summary: List all pets\n      operationId: listPets\n      tags:\n        - pets\n      parameters:\n        - name: limit\n          in: query\n          description: How many items to return at one time (max 100)\n          required: false\n          schema:\n            type: integer\n            maximum: 100\n            format: int32\n      responses:\n        \'200\':\n          description: A paged array of pets\n          headers:\n            x-next:\n              description: A link to the next page of responses\n              schema:\n                type: string\n          content:\n            application/json:    \n              schema:\n                $ref: "#/components/schemas/Pets"\n        default:\n          description: unexpected error\n          content:\n            application/json:\n              schema:\n                $ref: "#/components/schemas/Error"\n    post:\n      summary: Create a pet\n      operationId: createPets\n      tags:\n        - pets\n      responses:\n        \'201\':\n          description: Null response\n        default:\n          description: unexpected error\n          content:\n            application/json:\n              schema:\n                $ref: "#/components/schemas/Error"\n  /pets/{petId}:\n    get:\n      summary: Info for a specific pet\n      operationId: showPetById\n      tags:\n        - pets\n      parameters:\n        - name: petId\n          in: path\n          required: true\n          description: The id of the pet to retrieve\n          schema:\n            type: string\n      responses:\n        \'200\':\n          description: Expected response to a valid request\n          content:\n            application/json:\n              schema:\n                $ref: "#/components/schemas/Pet"\n        default:\n          description: unexpected error\n          content:\n            application/json:\n              schema:\n                $ref: "#/components/schemas/Error"\ncomponents:\n  schemas:\n    Pet:\n      type: object\n      required:\n        - id\n        - name\n      properties:\n        id:\n          type: integer\n          format: int64\n        name:\n          type: string\n        tag:\n          type: string\n    Pets:\n      type: array\n      maxItems: 100\n      items:\n        $ref: "#/components/schemas/Pet"\n    Error:\n      type: object\n      required:\n        - code\n        - message\n      properties:\n        code:\n          type: integer\n          format: int32\n        message:\n          type: string'},{displayName:ec.blankExampleTitle,spec:JSON.stringify({openapi:"3.1.0",info:{title:"Untitled",description:"Your OpenAPI specification",version:"v1.0.0"},servers:[{url:""}],paths:{},components:{schemas:{}}},null,2)}],ed=n(73558),ep=n(90166),em=n(25736),ef=n(99715),eh=n(76483),eg=n(1454),ev=n(68919),ex=n(41845),eb=n(60624),ey=n(49685),ej=n(7525),ew=n(31609),eP=n(55161),eN=n(79505),ek=n(49668);function eT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ez(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eT(Object(n),!0).forEach(function(t){(0,b.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eT(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function eO(){return(0,z.jsx)("div",{className:"relative flex h-full w-full items-center justify-center rounded-full border-2 border-dashed border-black border-token-border-medium",children:(0,z.jsx)(M.Z,{className:"h-1/4 w-1/4"})})}function eC(e){var t=e.gizmoEditorData,n=e.onFileChange,r=e.generateProfilePic,i=e.isGeneratingProfilePic,o=e.setIsGeneratingProfilePic,a=(0,Q.Z)(),s=(0,q.useState)(void 0),l=s[0],c=s[1],u=(0,q.useRef)(n);function d(){return(d=(0,v.Z)(j().mark(function e(t){var n,r;return j().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.length>0)){e.next=9;break}return o(!1),e.next=4,(0,eP.WI)(t[0],512);case 4:n=e.sent,c({tempId:r=(0,ew.W7)(n),file:n,status:ej.X.Uploading,progress:1,fileId:null,cdnUrl:null}),u.current("uploading"),(0,ew.lU)(r,n,a,w.Ei.ProfilePicture,{onFileCreated:function(e,t,n){c(function(r){return"initial"!==r&&(null==r?void 0:r.tempId)===e&&r.status===ej.X.Uploading?ez(ez({},r),{},{progress:10,fileId:t,cdnUrl:n}):r})},onFileUploadProgress:function(e,t){c(function(n){return"initial"!==n&&(null==n?void 0:n.tempId)===e&&n.status===ej.X.Uploading?ez(ez({},n),{},{progress:t}):n})},onFileUploaded:function(e,t){c(function(n){return"initial"!==n&&(null==n?void 0:n.tempId)===e?(u.current(n),ez(ez({},n),{},{status:ej.X.Ready,progress:100,fileSpec:ez({name:n.file.name,id:n.fileId,size:n.file.size},null!=t?t:{})})):n})},onError:function(e){c(function(t){if("initial"!==t&&(null==t?void 0:t.tempId)===e){u.current(void 0);return}return t})}});case 9:case"end":return e.stop()}},e)}))).apply(this,arguments)}(0,q.useEffect)(function(){u.current=n});var p=(0,eh.uI)(ez({disabled:!1,noClick:!0,onDropAccepted:function(e){return d.apply(this,arguments)},onDropRejected:function(e){return(0,eb.UJ)(e,a,ej.A.ProfilePicture)},multiple:!0,maxSize:ex.xC},(0,eP.Z8)(eP.KL))),m=p.open,f=p.getInputProps;return(0,z.jsxs)("div",{className:"flex w-full items-center justify-center gap-4",children:[(0,z.jsxs)(ef.fC,{children:[(0,z.jsx)(ef.xz,{className:"h-20 w-20",children:i?(0,z.jsx)(eO,{}):null!=l&&"initial"!=l&&l.status!=ej.X.Ready?(0,z.jsxs)("div",{className:"relative h-full w-full overflow-hidden rounded-full",children:[(0,z.jsx)(ey.l,{file:l.file}),l.status===ej.X.Uploading&&l.progress<90?(0,z.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-black/5 text-white",children:(0,z.jsx)(ev.Z,{percentage:l.progress,className:"h-6 w-6"})}):null]}):(null==t?void 0:t.profilePictureUrl)!=null&&(null==t?void 0:t.profilePictureUrl)!==""?(0,z.jsx)(eN.Z,{isFirstParty:!1,src:t.profilePictureUrl}):(0,z.jsx)("div",{className:"flex h-full w-full items-center justify-center rounded-full border-2 border-dashed border-black border-token-border-medium",children:(0,z.jsx)(eg.OvN,{className:"text-4xl"})})}),(0,z.jsx)(ef.Uv,{children:(0,z.jsxs)(ef.VY,{className:"flex min-w-[100px] max-w-xs flex-col rounded-xl border border-gray-400 bg-token-surface-primary shadow-lg dark:border-gray-700",sideOffset:7,children:[(0,z.jsx)(ek.UA,{onClick:m,children:"Upload Photo"}),(0,z.jsx)(ek.UA,{onClick:r,children:"Use DALL\xb7E"})]})})]}),(0,z.jsx)("input",ez({},f()))]})}var eI=n(46514),e_=n(32062),eS=n(70737),eG=n(97296),eM=n(7137),eE=n(3125),eD=n(25349),eA=n(99893);function eZ(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function eL(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eZ(Object(n),!0).forEach(function(t){(0,b.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eZ(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function eU(e){var t,n,r=e.gizmoEditorData,i=e.requireGizmoId,o=e.currentModelConfig,a=e.updateGizmo,s=(0,Q.Z)(),l=(0,q.useState)(0),c=(l[0],l[1]),u=(0,q.useRef)(new Map),d=(0,eP.Zp)(o,void 0),p=(t=(0,v.Z)(j().mark(function e(t){var n;return j().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return eD.A.logEvent(eA.M.uploadFile,{eventSource:"mouse",intent:"gizmo"}),e.next=3,i();case 3:if(n=e.sent,!(t.length>0)){e.next=7;break}return e.next=7,Promise.all(t.map(function(e){var t=(0,ew.W7)(e);u.current.set(t,{tempId:t,gizmoId:n,file:e,status:ej.X.Uploading,progress:1,fileId:null,cdnUrl:null}),(0,ew.cT)((0,ew.W7)(e),e,s,{kind:w.Ei.Gizmo,gizmoId:n},{onFileUploaded:function(e,t,n){var r=u.current.get(e);null!=r&&null!=r.fileId&&(a(function(e){var t;return eL(eL({},e),{},{files:[].concat((0,x.Z)(null!==(t=e.files)&&void 0!==t?t:[]),[{file_id:r.fileId,name:r.file.name,size:r.file.size,type:r.file.type,last_modified:r.file.lastModified,file_size_tokens:null==n?void 0:n.fileTokenSize}])})}),u.current.delete(e),c(function(e){return e+1}))},onFileCreated:function(t,r,i){u.current.set(t,eL(eL({tempId:t,gizmoId:n,file:e,status:ej.X.Uploading,progress:1},u.current.get(t)),{},{fileId:r,cdnUrl:i})),c(function(e){return e+1})},onFileUploadProgress:function(e,t){var n=u.current.get(e);(null==n?void 0:n.status)===ej.X.Uploading&&u.current.set(e,eL(eL({},n),{},{progress:t})),c(function(e){return e+1})},onError:function(e){u.current.delete(e)}},{usesRetrievalIndex:null!=o&&(0,eP._0)(o,e.type,e.name)===w.Cd.Retrieval})}));case 7:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)}),m=(0,eh.uI)(eL({disabled:!1,noClick:!0,onDropAccepted:p,multiple:!0,maxSize:ex.xC,maxFiles:10},(0,eP.Z8)(d))),f=m.getInputProps,h=m.open,g=null!==(n=null==r?void 0:r.files)&&void 0!==n?n:[];function b(e){return(0,z.jsx)(ey.Z,{onRemoveFileClick:function(){u.current.delete(e.tempId),c(function(e){return e+1})},file:e.file,loadingPercentage:e.status===ej.X.Uploading?e.progress:void 0},e.tempId)}function y(e){return(0,z.jsx)(ey.Z,{file:e.name,fileId:e.file_id,onRemoveFileClick:function(){return a(function(t){var n;return eL(eL({},t),{},{files:null==t?void 0:null===(n=t.files)||void 0===n?void 0:n.filter(function(t){return t.file_id!==e.file_id})})})},gizmoId:null==r?void 0:r.id},e.file_id)}var P=Array.from(u.current.values()).filter(function(e){return g.every(function(t){return t.file_id!==e.fileId})}),N=(0,K.partition)(P,function(e){return null!=o&&(0,eP._0)(o,e.file.type,e.file.name)===w.Cd.CodeInterpreter}),k=(0,eE.Z)(N,2),T=k[0],O=k[1],C=(0,K.partition)(g,function(e){return null!=o&&null!=e.type&&(0,eP._0)(o,e.type,e.name)===w.Cd.CodeInterpreter}),I=(0,eE.Z)(C,2),_=I[0],S=I[1],G=(0,q.useRef)(_.length);return(0,q.useEffect)(function(){_.length>G.current&&a(function(e){var t,n;return null!==(t=e.tools)&&void 0!==t&&t.some(function(e){return e.type===w.qK.PYTHON})?e:eL(eL({},e),{},{tools:[].concat((0,x.Z)(null!==(n=e.tools)&&void 0!==n?n:[]),[{type:w.qK.PYTHON}])})}),G.current=_.length},[_.length]),(0,z.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,z.jsx)("div",{className:"rounded-lg text-gray-500",children:(0,z.jsx)(en.Z,eL({},eR.knowledgeWarning))}),O.length>0||S.length>0?(0,z.jsxs)("div",{className:"flex flex-wrap gap-2",children:[O.map(b),S.map(y)]}):null,T.length>0||_.length>0?(0,z.jsxs)("div",{children:[(0,z.jsx)("div",{className:"mb-2 text-xs text-gray-500",children:"The following files are only available for Code Interpreter:"}),(0,z.jsxs)("div",{className:"flex flex-wrap gap-2",children:[T.map(b),_.map(y)]})]}):null,(0,z.jsx)("div",{children:(0,z.jsxs)(ek.cY,{onClick:h,children:[(0,z.jsx)("input",eL({},f())),"Upload files"]})})]})}var eR=(0,es.vU)({knowledgeWarning:{id:"gizmo.knowledgeWarning",defaultMessage:"If you upload files under Knowledge, conversations with your GPT may include file contents. Files can be downloaded when Code Interpreter is enabled"}});function eV(e){var t=e.placeholder,n=e.text,r=e.onChange,i=e.onClose;return(0,z.jsx)(k.Z,{className:"!max-h-[100vh] !max-w-[80vw]",type:"success",isOpen:!0,onClose:i,primaryButton:(0,z.jsx)(ek.cY,{onClick:i,children:"Close"}),children:(0,z.jsx)("textarea",{className:"h-[70vh] w-full resize-none rounded-lg dark:border-gray-700 dark:bg-gray-800",value:n,onChange:function(e){r(e.target.value)},placeholder:t})})}function eq(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function eF(e){var t=e.label,n=e.toolType,r=e.enabledTools,i=e.onEnabledToolsChange,o=e.disabled,a=e.disabledTooltip,s=function(e){return r.some(function(t){return t.type===e})},l=(0,z.jsx)(ek.f8,{labelClassName:"w-full cursor-pointer",id:n,label:t,checked:!o&&s(n),disabled:o,onChange:function(){s(n)?i(r.filter(function(e){return e.type!==n})):i([].concat((0,x.Z)(r),[{type:n}]))}});return null!=a?(0,z.jsx)("div",{className:"opacity-70",children:(0,z.jsx)(ep.u,{side:"top",label:a,children:l})}):l}function eW(e){var t=e.enabledTools,n=e.onEnabledToolsChange,r=(0,P.C)(A.L0.BrowseAvailable);return(0,z.jsxs)("div",{className:"flex flex-col items-start gap-2",children:[(0,z.jsx)(eF,{label:"Web Browsing",toolType:w.qK.BROWSER,enabledTools:t,onEnabledToolsChange:n,disabled:!r,disabledTooltip:r?void 0:(0,z.jsx)(en.Z,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eq(Object(n),!0).forEach(function(t){(0,b.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eq(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},eB.disabledBrowsingToolTip))}),(0,z.jsx)(eF,{label:"DALL\xb7E Image Generation",toolType:w.qK.DALLE,enabledTools:t,onEnabledToolsChange:n}),(0,z.jsx)(eF,{label:(0,z.jsxs)("div",{className:"flex items-center",children:["Code Interpreter",(0,z.jsx)(e8,{description:"Code Interpreter lets your GPT run code. When enabled, your GPT can analyze data, work with files you've uploaded, do math and more"})]}),toolType:w.qK.PYTHON,enabledTools:t,onEnabledToolsChange:n})]})}var eB=(0,es.vU)({disabledBrowsingToolTip:{defaultMessage:"Web browsing is disabled for your workspace. Contact your admin to enable it.",id:"GizmoEditorModelPicker.disabledBrowsingToolTip"}}),eH=n(67311);function eK(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function eJ(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function eY(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eJ(Object(n),!0).forEach(function(t){(0,b.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eJ(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function eQ(e){switch(e){case s.Loading:return"Loading";case s.UploadingProfilePic:return"Uploading profile picture";case s.GeneratingProfilePic:return"Generating profile picture";case s.GizmoNameTooLong:return"GPT name too long";case s.GizmoDescriptionTooLong:return"GPT description too long";case s.GizmoWelcomeMessageTooLong:return"GPT welcome message too long";case s.GizmoInstructionsTooLong:return"GPT instructions too long";case s.NameEmpty:return"GPT name cannot be empty";case s.MissingPublicActionPrivacyPolicyURL:return"Public actions require valid privacy policy URLs";case s.MissingCategory:return"Public GPTs must have a category";default:return(0,eH.Z)(e),""}}function eX(e,t,n){var r=e.name.length>em.aI,i=(null!==(c=null===(u=e.description)||void 0===u?void 0:u.length)&&void 0!==c?c:0)>em.P_,o=(null!==(d=null===(p=e.welcomeMessage)||void 0===p?void 0:p.length)&&void 0!==d?d:0)>em.Lu,a=(null!==(m=null===(f=e.instructions)||void 0===f?void 0:f.length)&&void 0!==m?m:0)>em.vi,l=[];if((null==e?void 0:e.name)===""&&l.push(s.NameEmpty),r&&l.push(s.GizmoNameTooLong),i&&l.push(s.GizmoDescriptionTooLong),a&&l.push(s.GizmoInstructionsTooLong),o&&l.push(s.GizmoWelcomeMessageTooLong),null!=t&&[G.Zz.Link,G.Zz.Marketplace].includes(t)){var c,u,d,p,m,f,h,g,v=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return eK(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return eK(e,t)}}(e))){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}(null===(h=e.tools)||void 0===h?void 0:h.filter(function(e){return e.type===w.qK.JIT_PLUGIN}));try{for(v.s();!(g=v.n()).done;){var x,b=g.value,y=null===(x=b.metadata)||void 0===x?void 0:x.privacy_policy_url;if(null==y||!function(e){try{return new URL(e),!0}catch(e){return!1}}(y)){l.push(s.MissingPublicActionPrivacyPolicyURL);break}}}catch(e){v.e(e)}finally{v.f()}}return t===G.Zz.Marketplace&&null==n&&l.push(s.MissingCategory),l}function e$(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function e0(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?e$(Object(n),!0).forEach(function(t){(0,b.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):e$(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}(r=s||(s={}))[r.Loading=0]="Loading",r[r.UploadingProfilePic=1]="UploadingProfilePic",r[r.GeneratingProfilePic=2]="GeneratingProfilePic",r[r.GizmoNameTooLong=3]="GizmoNameTooLong",r[r.GizmoDescriptionTooLong=4]="GizmoDescriptionTooLong",r[r.GizmoWelcomeMessageTooLong=5]="GizmoWelcomeMessageTooLong",r[r.GizmoInstructionsTooLong=6]="GizmoInstructionsTooLong",r[r.NameEmpty=7]="NameEmpty",r[r.MissingPublicActionPrivacyPolicyURL=8]="MissingPublicActionPrivacyPolicyURL",r[r.MissingCategory=9]="MissingCategory";var e1=I.Z.input(l||(l=(0,C.Z)(["w-full resize-none overflow-y-auto rounded-lg px-3 py-2 text-sm outline-none focus:ring-2 border focus:ring-blue-400 border-token-border-medium dark:bg-gray-700 h-9 dark:bg-gray-800"]))),e2=I.Z.div(c||(c=(0,C.Z)(["text-sm text-red-500"]))),e3=I.Z.div(u||(u=(0,C.Z)(["mb-6"]))),e5=I.Z.textarea(d||(d=(0,C.Z)(["w-full text-sm overflow-y-auto rounded-lg border bg-transparent px-3 py-2 focus:ring-2 focus:ring-blue-400 border-token-border-medium dark:bg-gray-800 bg-white h-32"])));function e4(){return(0,z.jsx)("div",{className:"ml-2 flex h-3.5 w-3.5 cursor-default items-center justify-center rounded-full border border-token-border-medium text-[0.5rem] font-medium leading-none text-gray-500 ",children:"?"})}function e8(e){var t=e.description;return(0,z.jsx)(ep.u,{label:t,delayDuration:0,children:(0,z.jsx)(e4,{})})}function e9(e){var t=e.label,n=e.description,r=e.collapsed,i=e.onClick,o=(0,z.jsx)("label",{className:"block font-medium text-token-text-primary",children:t});return(0,z.jsxs)("div",{className:"mb-1.5 flex items-center",onClick:i,children:[void 0!==r&&(r?(0,z.jsx)(eM.H_v,{}):(0,z.jsx)(eM.iUH,{})),n?(0,z.jsx)(ep.u,{label:n,sideOffset:4,side:"top",delayDuration:0,children:o}):(0,z.jsx)(z.Fragment,{children:o})]})}function e6(e){var t=e.children,n=e.collapsed,r=e.initial;return(0,z.jsx)(eS.M,{initial:r,children:!n&&(0,z.jsx)(eG.E.div,{initial:"collapsed",animate:"open",exit:"collapsed",variants:{open:{opacity:1,height:"auto"},collapsed:{opacity:0,height:0}},children:t})})}function e7(e){var t,n=e.actionTool,r=e.onShowActionsEditor,i=e.isDisabled,o="metadata"in n?null===(t=n.metadata)||void 0===t?void 0:t.domain:void 0;return(0,z.jsxs)("div",{className:"flex rounded-lg border border-token-border-medium text-sm hover:cursor-pointer",onClick:r,children:[(0,z.jsx)("div",{className:"h-9 grow px-3 py-2",children:null!=o?o:(0,z.jsx)("span",{className:"text-red-500",children:"Invalid action"})}),(0,z.jsx)("div",{className:"w-px bg-token-border-medium"}),(0,z.jsx)("button",{disabled:i,className:"flex h-9 w-9 items-center justify-center rounded-lg rounded-l-none",children:(0,z.jsx)(et.RR,{className:"icon-sm"})})]})}function te(e){var t,n,r,i=e.gizmo,o=e.onShowActionsEditor,a=e.isDisabled,s=(0,Q.Z)(),l=(0,z.jsxs)("div",{className:"space-y-1",children:[null==i?void 0:null===(t=i.tools)||void 0===t?void 0:t.map(function(e,t){var n;return e.type!==w.qK.JIT_PLUGIN?null:(0,z.jsxs)("div",{children:[(0,z.jsx)(e7,{isDisabled:a,actionTool:e,onShowActionsEditor:function(){return o(e.metadata.domain)}}),(null===(n=e.metadata.auth)||void 0===n?void 0:n.type)==="oauth"&&(0,z.jsx)(ed.Z,{label:"Callback URL",value:"".concat("https://chat.openai.com","/aip/").concat(e.metadata.action_id,"/oauth/callback"),onCopied:function(){E.m.success("Copied to clipboard",{duration:3})}})]},t)}),(null!==(n=null==i?void 0:null===(r=i.tools)||void 0===r?void 0:r.filter(function(e){return e.type===w.qK.JIT_PLUGIN}))&&void 0!==n?n:[]).length>=em.L5?(0,z.jsx)("div",{children:s.formatMessage(tn.maxActionsReached,{number:em.L5})}):(0,z.jsx)(ek.cY,{disabled:a,onClick:function(){o("Unknown domain")},className:"mt-2",children:(0,z.jsx)(en.Z,e0({},tn.createActionLabel))})]});return a?(0,z.jsx)(ep.u,{side:"top",label:s.formatMessage(tn.disabledCustomActionsTooltip),children:l}):l}function tt(e){var t,n,r,i,o,a,l,c,u,d,p=e.gizmoEditorData,m=e.updateGizmo,f=e.generateProfilePic,h=e.setIsUploadingProfilePic,g=e.isGeneratingProfilePic,b=e.setIsGeneratingProfilePic,y=e.requireGizmoId,N=e.onShowActionsEditor,k=(0,eI.B9)(),T=eI.mx,O=null!==(o=null==p?void 0:p.tools)&&void 0!==o?o:[],C=T?k[T]:void 0,I=(0,q.useState)(!1),_=I[0],S=I[1],G=(0,q.useState)(!1),M=G[0],E=G[1],D=(0,q.useState)(!0),Z=D[0],U=D[1],R=null!==(a=null==p?void 0:p.promptStarters)&&void 0!==a?a:[],V=[].concat((0,x.Z)(R),(0,x.Z)(R.length<12?[""]:[])),F=eX(p),W=(0,L.ec)(L.F_.isBusinessWorkspace),B=(0,P.C)(A.L0.WorkspaceGPTCustomActions),J=(0,Q.Z)();return(0,z.jsxs)("div",{className:"flex h-full grow flex-col overflow-y-auto px-2 pt-6 text-sm",children:[(0,z.jsxs)("div",{className:"grow",children:[(0,z.jsxs)(e3,{children:[(0,z.jsx)(eC,{gizmoEditorData:p,generateProfilePic:f,isGeneratingProfilePic:g,setIsGeneratingProfilePic:b,onFileChange:(t=(0,v.Z)(j().mark(function e(t){var n;return j().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(null!=t&&"uploading"!==t&&null!=t.fileId)){e.next=7;break}return e.next=3,e_.ZP.getFileDownloadLink(t.fileId);case 3:(n=e.sent).status===w.KF.Success&&m({profilePictureId:null!=t.fileId?t.fileId:void 0,profilePictureUrl:n.download_url}),e.next=8;break;case 7:m({profilePictureId:void 0,profilePictureUrl:void 0});case 8:h("uploading"===t);case 9:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)})}),(0,z.jsx)(e9,{label:"Name",description:"The name of your GPT"}),(0,z.jsx)(e1,{type:"text",placeholder:"Name your GPT",value:null!==(l=null==p?void 0:p.name)&&void 0!==l?l:"",onChange:function(e){m({name:e.target.value})},onBlurCapture:function(){return m(function(e){return e0(e0({},e),{},{name:e.name.trim()})})}}),F.includes(s.GizmoNameTooLong)?(0,z.jsx)(e2,{className:"mt-1",children:(0,z.jsx)(en.Z,e0(e0({},tn.nameTooLong),{},{values:{length:em.aI}}))}):null]}),(0,z.jsxs)(e3,{className:"mt-4",children:[(0,z.jsx)(e9,{label:"Description",description:"Short description of what this GPT does"}),(0,z.jsx)(e1,{type:"text",placeholder:"Add a short description about what this GPT does",value:null!==(c=null==p?void 0:p.description)&&void 0!==c?c:"",onChange:function(e){return m({description:e.target.value})},onBlurCapture:function(){return m(function(e){var t,n;return e0(e0({},e),{},{description:null!==(t=null===(n=e.description)||void 0===n?void 0:n.trim())&&void 0!==t?t:""})})}}),F.includes(s.GizmoDescriptionTooLong)?(0,z.jsx)(e2,{className:"mt-1",children:(0,z.jsx)(en.Z,e0(e0({},tn.descriptionTooLong),{},{values:{length:em.P_}}))}):null]}),(0,z.jsxs)(e3,{children:[(0,z.jsx)(e9,{label:"Instructions",description:"What does this GPT do? How does it behave? What should it avoid doing?"}),(0,z.jsxs)("div",{className:"relative",children:[(0,z.jsx)(e5,{className:"resize-none",rows:8,value:null==p?void 0:p.instructions,onChange:function(e){return m({instructions:e.target.value})},onBlurCapture:function(){return m(function(e){return e0(e0({},e),{},{instructions:e.instructions.trim()})})},placeholder:"What does this GPT do? How does it behave? What should it avoid doing?"}),(0,z.jsx)("button",{className:"absolute bottom-3 right-2 text-token-text-tertiary",onClick:function(){return S(!0)},children:(0,z.jsx)(et.j5,{className:"icon-sm"})})]}),F.includes(s.GizmoInstructionsTooLong)?(0,z.jsx)(e2,{className:"mt-1",children:(0,z.jsx)(en.Z,e0(e0({},tn.instructionsTooLong),{},{values:{length:em.vi}}))}):null]}),(0,z.jsxs)(e3,{className:"hidden",children:[(0,z.jsx)(e9,{label:"Welcome Message",description:"How this GPT starts conversations."}),(0,z.jsxs)("div",{className:"relative",children:[(0,z.jsx)(e5,{className:(0,H.default)("h-16 resize-none"),value:null==p?void 0:p.welcomeMessage,onChange:function(e){return m({welcomeMessage:e.target.value})},placeholder:"How this GPT starts conversations."}),(0,z.jsx)("button",{className:"absolute bottom-3 right-2 text-token-text-tertiary",onClick:function(){return E(!0)},children:(0,z.jsx)(et.j5,{className:"icon-sm"})})]}),F.includes(s.GizmoWelcomeMessageTooLong)?(0,z.jsx)(e2,{className:"mt-1",children:(0,z.jsx)(en.Z,e0(e0({},tn.welcomeMessageTooLong),{},{values:{length:em.Lu}}))}):null]}),(0,z.jsxs)(e3,{children:[(0,z.jsx)(e9,{label:"Conversation starters",description:"Examples for the user to start the conversation"}),(0,z.jsx)("div",{className:"flex flex-col gap-1",children:V.map(function(e,t){return(0,z.jsxs)("div",{className:"flex items-center",children:[(0,z.jsx)(e1,{className:"rounded-r-none",value:e,type:"text",onChange:function(e){var n=e.target.value;m(function(e){var r;return e0(e0({},e),{},{promptStarters:(0,K.compact)(t>=(null!==(r=R.length)&&void 0!==r?r:0)?[].concat((0,x.Z)(null!=R?R:[]),[n]):R.map(function(e,r){if(r===t){if(""===n)return;return n}return e}))})})}}),(0,z.jsx)("button",{className:"flex h-9 w-9 items-center justify-center rounded-lg rounded-l-none border border-l-0 border-token-border-medium",onClick:function(){return m(function(e){return e0(e0({},e),{},{promptStarters:R.filter(function(e,n){return n!==t})})})},children:(0,z.jsx)(et.v7,{className:"icon-sm"})})]},t)})})]}),(0,z.jsxs)(e3,{children:[(0,z.jsx)(e9,{label:"Knowledge",description:J.formatMessage(tn.knowledgeExplanation)}),(0,z.jsx)(eU,{gizmoEditorData:p,requireGizmoId:y,currentModelConfig:C,updateGizmo:m})]}),(0,z.jsxs)(e3,{children:[(0,z.jsx)(e9,{label:"Capabilities",description:"Functionality this GPT can use"}),(0,z.jsx)(eW,{enabledTools:O,onEnabledToolsChange:function(e){return m({tools:e})}})]}),(0,z.jsxs)(e3,{children:[(0,z.jsx)(e9,{label:"Actions",description:"APIs this GPT can use"}),(0,z.jsx)(te,{isDisabled:!!(W&&!B),gizmo:p,onShowActionsEditor:N})]}),!W&&((null!==(n=null===(r=p.files)||void 0===r?void 0:r.length)&&void 0!==n?n:0)>0||(null==p?void 0:null===(i=p.tools)||void 0===i?void 0:i.some(function(e){return e.type===w.qK.JIT_PLUGIN})))&&(0,z.jsxs)(e3,{children:[(0,z.jsx)(e9,{label:"Additional Settings",collapsed:!!Z,onClick:function(){U(function(e){return!e})}}),(0,z.jsx)(e6,{collapsed:Z,initial:!1,children:(0,z.jsx)(ek.f8,{className:"mx-3 my-1",labelClassName:"w-full cursor-pointer",label:"Use conversation data in your GPT to improve our models",id:"improve-chatgpt",checked:!p.trainingDisabled,onChange:function(){m({trainingDisabled:!p.trainingDisabled})}})})]})]}),M&&(0,z.jsx)(eV,{text:null!==(u=p.welcomeMessage)&&void 0!==u?u:"",onChange:function(e){m({welcomeMessage:e})},onClose:function(){return E(!1)},placeholder:"How this GPT starts conversations."}),_&&(0,z.jsx)(eV,{text:null!==(d=p.instructions)&&void 0!==d?d:"",onChange:function(e){m({instructions:e})},onClose:function(){return S(!1)},placeholder:"What does this GPT do? How does it behave? What should it avoid doing?"})]})}var tn=(0,es.vU)({nameTooLong:{id:"gizmo.nameTooLong",defaultMessage:"GPT names cannot be longer than {length} characters."},knowledgeExplanation:{id:"gizmo.knowledgeExplanation",defaultMessage:"Additional files for this GPT to reference."},descriptionTooLong:{id:"gizmo.descriptionTooLong",defaultMessage:"GPT descriptions cannot be longer than {length} characters."},instructionsTooLong:{id:"gizmo.instructionsTooLong",defaultMessage:"GPT instructions cannot be longer than {length} characters."},welcomeMessageTooLong:{id:"gizmo.welcomeMessageTooLong",defaultMessage:"GPT welcome messages cannot be longer than {length} characters."},disabledCustomActionsTooltip:{id:"gizmo.disabledCustomActionsTooltip",defaultMessage:"Custom actions are disabled for your workspace. Contact your admin to enable them."},createActionLabel:{id:"gizmo.createActionLabel",defaultMessage:"Create new action"},maxActionsReached:{id:"gizmo.maxActionsReached",defaultMessage:"GPTs can have a maximum of {number} actions"}}),tr=n(9559),ti=n(85695);function to(e){var t=e.clientThreadId,n=(0,Z.oq)(t),r=(0,Z.UL)(t),i=(0,eI.Bv)(r.lastModelUsed,t),o=(0,Z.U0)(t,n),a=(0,x.Z)(Array(o).keys()).map(function(e){return(0,z.jsx)(ti.Z,{isFinalTurn:e===o-1,turnIndex:e,clientThreadId:t,conversationLeafId:n,onChangeItemInView:K.noop,onChangeRating:K.noop,onRequestMoreCompletions:K.noop,onRequestCompletion:K.noop,currentModelId:null!=i?i:""},e)});return(0,z.jsx)(z.Fragment,{children:a})}function ta(e){var t=e.clientThreadIds;return(0,z.jsx)(z.Fragment,{children:t.map(function(e){return(0,z.jsx)(to,{clientThreadId:e},e)})})}var ts=n(75499),tl=n(99642),tc=n(13366),tu=n(18008),td=n(58272),tp=n(99304),tm=n(84623),tf=n(8844),th=n(65654),tg=n(90439),tv=n(67404);function tx(){return(0,z.jsxs)("div",{className:"flex items-center",children:[(0,z.jsx)("div",{className:"border-token-border-secondary flex-grow border-b"}),(0,z.jsxs)("div",{className:"flex flex-shrink-0 items-center gap-2 px-2 py-6 text-sm text-token-text-tertiary",children:[(0,z.jsx)(eg.V7f,{}),"GPT updated"]}),(0,z.jsx)("div",{className:"border-token-border-secondary flex-grow border-b"})]})}(i=p||(p={}))[i.MAGIC=1]="MAGIC",i[i.SANDBOX=2]="SANDBOX",(m||(m={})).TestGizmoAction="test_gizmo_action";var tb=new tp.V,ty=q.memo(function(e){var t,n,r,i=e.gizmoEditorData,o=e.isSavingDraft,a=e.showTitle,s=(0,q.useState)(function(){return(0,Z.OX)()}),l=s[0],c=s[1],u=(0,q.useState)([]),d=u[0],p=u[1];(0,q.useEffect)(function(){p(function(e){return e[e.length-1]===l?e:[].concat((0,x.Z)(e),[l])})},[l]);var m=d.slice(0,-1);(0,Z.ax)(l);var f=(0,Z.UL)(l);(0,q.useEffect)(function(){null!=i.id&&Z.tQ.setNewThreadConversationModeMetadata(l,{kind:$.OL.GizmoTest,gizmo_id:i.id})},[l,i.id]);var h=null===(r=i.files)||void 0===r?void 0:r.map(function(e){return e.file_id}).join();(0,q.useEffect)(function(){null!=Z.tQ.getServerThreadId(l)&&c((0,Z.OX)())},[i.id,i.instructions,i.welcomeMessage,i.tools,h,l]),(0,q.useEffect)(function(){(0,Z.Zz)(l)&&Z.iN.hasThread(l)&&f.lastModelUsed!==eI.mx&&(Z.tQ.getOrInitThread(l),Z.tQ.updateInitialThreadDataForNewThread(l,eI.mx,[]))},[l,f,i]);var g=(0,tu.tN)(function(e){return e.activeSidebar}),b=(0,q.useMemo)(function(){return{gizmoEditorData:i,mode:"test"}},[i]),y=(0,q.useState)(0),w=y[0],P=y[1],N=function(){P(function(e){return e-360})},k=i.id,T=(n=(0,th.Z)(l,void 0,K.noop,K.noop,K.noop,[]),(0,q.useCallback)((t=(0,v.Z)(j().mark(function e(t,r,i){var o,a,s,c,u,d;return j().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o=Z.tQ.getThreadCurrentLeafId(l),a=(0,tf.Z)(),Z.tQ.updateTree(l,function(e){e.addNodeToEnd(o,{id:a,children:[],parentId:o,message:{id:a,author:{role:$.uU.User},content:{content_type:$.PX.Text,parts:["Call the ".concat(r," API with the ").concat(i," operation")]},recipient:"all",metadata:{jit_plugin_data:{from_client:{user_action:{data:{type:"test",operation:i,tool_name:(0,tr.VN)(r)}}}}}}})}),s={conversationMode:{kind:$.OL.GizmoTest,gizmo_id:t}},c=[eI.S.GPT_4],u=(0,tm.Rr)((0,D.N$)(),c,$.OL.GizmoTest),d=null,!u){e.next=11;break}return e.next=10,tm.ZP.getEnforcementToken(c);case 10:d=e.sent;case 11:n({model:eI.mx,completionType:$.Os.Next,parentNodeId:a,metadata:{},focusOnNewCompletion:!0,arkoseToken:d,preflightTime:0,completionMetadata:s});case 12:case"end":return e.stop()}},e)})),function(e,n,r){return t.apply(this,arguments)}),[l,n]));return(0,q.useEffect)(function(){return(0,td.LW)(tb,{test_gizmo_action:function(e){var t=e.rootDomain,n=e.operationName;k&&T(k,t,n)}})},[T,k]),(0,z.jsx)(tg.D.Provider,{value:b,children:(0,z.jsxs)("div",{className:(0,H.default)("flex h-full w-full",o&&"cursor-wait opacity-80 transition"),children:[(0,z.jsxs)("div",{className:"flex grow flex-col",children:[(0,z.jsx)("div",{className:"relative mb-2 flex-shrink-0",children:(0,z.jsx)("div",{className:"flex justify-center py-1",children:(void 0===a||a)&&(0,z.jsxs)("div",{className:"group flex items-center gap-2 text-lg font-medium",children:[(0,z.jsx)("div",{className:"icon-md"}),(0,z.jsxs)("button",{onClick:function(){N(),p([]),c((0,Z.OX)())},className:"flex items-center gap-2",children:["Preview",(0,z.jsx)(eG.E.div,{className:"text-token-text-primary",animate:{rotate:w},transition:{duration:.3},children:(0,z.jsx)(et.u8,{className:"icon-md invisible group-hover:visible"})})]})]})})}),(0,z.jsx)("div",{className:(0,H.default)("relative grow overflow-auto px-2",o&&"pointer-events-none"),children:(0,z.jsx)(tl.Z,{initialThreadData:f,clientThreadId:l,hideHeader:!0,renderEmptyState:(0,z.jsxs)("div",{className:"relative h-full w-full",children:[null!=m&&m.length>0&&(0,z.jsx)("div",{className:"h-full w-full opacity-20",children:(0,z.jsxs)(tc.I,{children:[(0,z.jsx)(ta,{clientThreadIds:m}),(0,z.jsx)(tx,{})]})}),(0,z.jsx)("div",{className:"absolute left-0 top-0 h-full w-full",children:(0,z.jsx)(tv.r,{gizmo:i,isOwner:!0,hideOwner:!0})})]}),prependThreadChildren:m.length>0&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)("div",{className:"opacity-50",children:(0,z.jsx)(ta,{clientThreadIds:m})}),(0,z.jsx)(tx,{})]})})})]}),"debug"===g&&(0,z.jsx)(ts.fv,{clientThreadId:l,slideOver:!1,onClose:function(){return tu.vm.toggleActiveSidebar("debug")},isOpen:!0})]})})}),tj=["oauth_client_id","oauth_client_secret"],tw=["api_key"];function tP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function tN(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tP(Object(n),!0).forEach(function(t){(0,b.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tP(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var tk="".concat("https://chat.openai.com","/g/g-TYEliDU6A-actionsgpt");function tT(e){var t=e.children;return(0,z.jsx)("label",{className:"mb-1 block text-sm font-medium",children:t})}function tz(e){var t,n,r,i,o,a,s,l,c,u,d,p,m,f,h,g,v,x,b,y,j,w=e.jitPluginTool,P=e.onUpdateTool,N=e.onClose,T=(0,q.useState)({apiKeyValue:"",oauthClientIdValue:"",oauthClientSecretValue:"",oauthAuthUrlValue:null!==(t=null==w?void 0:null===(n=w.metadata)||void 0===n?void 0:null===(r=n.auth)||void 0===r?void 0:r.client_url)&&void 0!==t?t:"",oauthTokenUrlValue:null!==(i=null==w?void 0:null===(o=w.metadata)||void 0===o?void 0:null===(a=o.auth)||void 0===a?void 0:a.authorization_url)&&void 0!==i?i:"",oauthScopeValue:null!==(s=null==w?void 0:null===(l=w.metadata)||void 0===l?void 0:null===(c=l.auth)||void 0===c?void 0:c.scope)&&void 0!==s?s:"",authTypeValue:null!==(u=null==w?void 0:null===(d=w.metadata)||void 0===d?void 0:null===(p=d.auth)||void 0===p?void 0:p.type)&&void 0!==u?u:$.Jv.None,httpAuthTypeValue:null!==(m=null==w?void 0:null===(f=w.metadata)||void 0===f?void 0:null===(h=f.auth)||void 0===h?void 0:h.authorization_type)&&void 0!==m?m:"basic",customHeaderValue:null!==(g=null==w?void 0:null===(v=w.metadata)||void 0===v?void 0:null===(x=v.auth)||void 0===x?void 0:x.custom_auth_header)&&void 0!==g?g:"",tokenExchangeMethodValue:null!==(b=null==w?void 0:null===(y=w.metadata)||void 0===y?void 0:null===(j=y.auth)||void 0===j?void 0:j.token_exchange_method)&&void 0!==b?b:"default_post"}),O=T[0],C=T[1];function I(e){C(function(t){return tN(tN({},t),e)})}return(0,z.jsxs)(k.Z,{type:"success",isOpen:!0,title:"Authentication",primaryButton:(0,z.jsx)(ee.z,{color:"dark",onClick:function(){P(O.authTypeValue===$.Jv.None?{type:$.Jv.None}:O.authTypeValue===$.Jv.OAuth?{type:$.Jv.OAuth,client_url:O.oauthAuthUrlValue,authorization_url:O.oauthTokenUrlValue,authorization_content_type:"application/x-www-form-urlencoded",scope:O.oauthScopeValue,token_exchange_method:O.tokenExchangeMethodValue,oauth_client_id:O.oauthClientIdValue,oauth_client_secret:O.oauthClientSecretValue}:{type:$.Jv.ServiceHTTP,authorization_type:O.httpAuthTypeValue,custom_auth_header:O.customHeaderValue,api_key:O.apiKeyValue}),N()},children:"Save"}),secondaryButton:(0,z.jsx)(ee.z,{color:"neutral",onClick:N,children:"Cancel"}),onClose:N,children:[(0,z.jsxs)("div",{className:"mb-4",children:[(0,z.jsx)(tT,{children:"Authentication Type"}),(0,z.jsxs)(eo.Z.Root,{onValueChange:function(e){I({authTypeValue:e})},value:O.authTypeValue,className:"flex gap-4",children:[(0,z.jsx)(ek.Xb,{label:"None",value:$.Jv.None}),(0,z.jsx)(ek.Xb,{label:"API Key",value:$.Jv.ServiceHTTP}),(0,z.jsx)(ek.Xb,{label:"OAuth",value:$.Jv.OAuth})]})]}),"service_http"===O.authTypeValue?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(tT,{children:"API Key"}),(0,z.jsx)(e1,{placeholder:"<HIDDEN>",type:"password",value:O.apiKeyValue,onChange:function(e){I({apiKeyValue:e.target.value})},className:"mb-2"}),(0,z.jsx)(tT,{children:"Auth Type"}),(0,z.jsxs)(eo.Z.Root,{className:"mb-2 flex gap-6 overflow-hidden rounded-lg",value:O.httpAuthTypeValue,required:!0,onValueChange:function(e){I({httpAuthTypeValue:e})},children:[(0,z.jsx)(ek.Xb,{value:"basic",label:"Basic"}),(0,z.jsx)(ek.Xb,{value:"bearer",label:"Bearer"}),(0,z.jsx)(ek.Xb,{value:"custom",label:"Custom"})]}),"custom"===O.httpAuthTypeValue&&(0,z.jsxs)("div",{className:"mt-2",children:[(0,z.jsx)(tT,{children:"Custom Header Name"}),(0,z.jsx)(e1,{value:O.customHeaderValue,onChange:function(e){I({customHeaderValue:e.target.value})},className:"mb-2",placeholder:"X-Api-Key"})]})]}):"oauth"===O.authTypeValue?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(tT,{children:"Client ID"}),(0,z.jsx)(e1,{placeholder:"<HIDDEN>",type:"password",value:O.oauthClientIdValue,onChange:function(e){I({oauthClientIdValue:e.target.value})},className:"mb-2"}),(0,z.jsx)(tT,{children:"Client Secret"}),(0,z.jsx)(e1,{placeholder:"<HIDDEN>",type:"password",value:O.oauthClientSecretValue,onChange:function(e){I({oauthClientSecretValue:e.target.value})},className:"mb-2"}),(0,z.jsx)(tT,{children:"Authorization URL"}),(0,z.jsx)(e1,{value:O.oauthAuthUrlValue,onChange:function(e){I({oauthAuthUrlValue:e.target.value})},className:"mb-2"}),(0,z.jsx)(tT,{children:"Token URL"}),(0,z.jsx)(e1,{value:O.oauthTokenUrlValue,onChange:function(e){I({oauthTokenUrlValue:e.target.value})},className:"mb-2"}),(0,z.jsx)(tT,{children:"Scope"}),(0,z.jsx)(e1,{value:O.oauthScopeValue,onChange:function(e){I({oauthScopeValue:e.target.value})},className:"mb-2"}),(0,z.jsx)(tT,{children:"Token Exchange Method"}),(0,z.jsxs)(eo.Z.Root,{value:O.tokenExchangeMethodValue,required:!0,onValueChange:function(e){I({tokenExchangeMethodValue:e})},children:[(0,z.jsx)(ek.Xb,{value:"default_post",label:"Default (POST request)"}),(0,z.jsx)(ek.Xb,{value:"basic_auth_header",label:"Basic authorization header"})]})]}):null]})}function tO(e){var t=e.onImport,n=e.onClose,r=(0,q.useState)(""),i=r[0],o=r[1],a=(0,q.useState)(!1),s=a[0],l=a[1];function c(){return(c=(0,v.Z)(j().mark(function e(){var r,o;return j().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,o=new URL(i),e.next=7;break;case 4:return e.prev=4,e.t0=e.catch(0),e.abrupt("return");case 7:if(!(null!==(r=o)&&void 0!==r&&r.hostname)){e.next=18;break}return l(!0),e.prev=9,e.next=12,T.U.fetchOpenAPISpec(i);case 12:t(e.sent.content),n();case 15:return e.prev=15,l(!1),e.finish(15);case 18:case"end":return e.stop()}},e,null,[[0,4],[9,,15,18]])}))).apply(this,arguments)}return(0,z.jsxs)("div",{className:"flex items-center gap-2",children:[(0,z.jsx)("input",{name:"url",value:i,onChange:function(e){o(e.target.value)},placeholder:"https://...",className:"h-8 rounded border border-token-border-light px-2 text-sm",autoFocus:!0}),(0,z.jsx)(ek.cY,{color:"dark",loading:s,onClick:function(){return c.apply(this,arguments)},children:"Import"}),(0,z.jsx)(ek.cY,{color:"neutral",onClick:n,children:"Cancel"})]})}function tC(e){var t=e.rootDomain,n=e.operations;return null==n||0===n.length?(0,z.jsx)("div",{className:"text-sm text-token-text-tertiary",children:"Operations in your schema will show here."}):(0,z.jsx)("table",{className:"w-full text-sm",children:(0,z.jsxs)("tbody",{children:[(0,z.jsxs)("tr",{className:"border-b border-token-border-light text-left text-xs text-token-text-tertiary",children:[(0,z.jsx)("th",{className:"py-1 font-normal",children:"Name"}),(0,z.jsx)("th",{className:"py-1 font-normal",children:"Method"}),(0,z.jsx)("th",{className:"py-1 font-normal",children:"Path"}),(0,z.jsx)("th",{className:"py-1 font-normal"})]}),n.map(function(e){return(0,z.jsxs)("tr",{className:"border-b border-token-border-light",children:[(0,z.jsx)("td",{className:"py-2",children:e.operationName}),(0,z.jsx)("td",{className:"py-2 uppercase",children:e.method}),(0,z.jsx)("td",{className:"py-2",children:e.path}),(0,z.jsx)("td",{className:"py-2",children:(0,z.jsx)(ek.cY,{color:"neutral",onClick:function(){t&&tb.publish({kind:m.TestGizmoAction,rootDomain:t,operationName:e.operationName})},children:"Test"})})]},e.operationName)})]})})}function tI(e){var t=e.validationResponse;return(0,z.jsxs)("div",{children:[(0,z.jsx)(e9,{label:"Available actions"}),(0,z.jsx)(tC,{rootDomain:t.success?t.spec.root_domain:void 0,operations:t.success?t.spec.operations:void 0})]})}function t_(e){var t,n,r,i,o,a,s,l,c=e.currentlyEditingActionDomain,u=e.gizmoEditorData,d=e.updateGizmo,p=e.onClose,m=(0,q.useState)(c),f=m[0],h=m[1],g=(0,q.useRef)(f);(0,q.useEffect)(function(){g.current=f},[f]);var b=null==u?void 0:null===(t=u.tools)||void 0===t?void 0:t.find(function(e){return e.type===w.qK.JIT_PLUGIN&&e.metadata.domain===f}),y=(0,q.useState)(function(){return null==b})[0],P=null!==(n=null==b?void 0:null===(r=b.metadata)||void 0===r?void 0:r.raw_spec)&&void 0!==n?n:"",N=(0,q.useState)(!1),k=N[0],O=N[1],C=(0,q.useState)(!1),I=C[0],_=C[1];function S(e){d(function(t){return tN(tN({},t),{},{tools:b?t.tools.map(function(t){return t.type===w.qK.JIT_PLUGIN&&t.metadata.domain===f?tN(tN({},t),{},{metadata:tN(tN({},t.metadata),e)}):t}):[].concat((0,x.Z)(t.tools),[{type:w.qK.JIT_PLUGIN,metadata:tN({raw_spec:"",domain:null!=f?f:"Unknown domain",action_id:""},e)}])})})}var G=(0,q.useState)(),M=G[0],E=G[1],D=(0,q.useState)(function(){var e;return(0,K.debounce)((e=(0,v.Z)(j().mark(function e(t){var n,r,i,o;return j().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.U.validateOpenAPISpec(t);case 2:if(E(n=e.sent),!(r=n.success?n.spec.root_domain:void 0)){e.next=13;break}if(!(r!==g.current)||!(null==u?void 0:null===(i=u.tools)||void 0===i?void 0:i.find(function(e){return e.type===w.qK.JIT_PLUGIN&&e.metadata.domain===r}))){e.next=11;break}return E({success:!1,errors:["Action sets cannot have duplicate domains - ".concat(r," already exists on another action")]}),e.abrupt("return");case 11:d(function(e){return tN(tN({},e),{},{tools:e.tools.map(function(e){return e.type===w.qK.JIT_PLUGIN&&e.metadata.domain===g.current?tN(tN({},e),{},{metadata:tN(tN({},e.metadata),{},{domain:r})}):e})})}),h(r);case 13:n.success&&n.known_auth&&n.known_privacy_policy&&(o=tN({type:$.Jv.OAuth},n.known_auth),(0,K.isEqual)(b.metadata.auth,o)||S({auth:tN({type:$.Jv.OAuth},n.known_auth)}),b.metadata.privacy_policy_url!==n.known_privacy_policy&&S({privacy_policy_url:n.known_privacy_policy}));case 14:case"end":return e.stop()}},e)})),function(t){return e.apply(this,arguments)}),1e3)})[0],A=null!=M?M.success?M.warnings:M.errors:void 0;(0,q.useEffect)(function(){""===P?(E(void 0),D.cancel()):D(P)},[D,P]);var Z=function(e){try{S({raw_spec:JSON.stringify(JSON.parse(e),null,2)})}catch(t){try{S({raw_spec:er.ZP.stringify(er.ZP.parse(e),{lineWidth:120,indent:2})})}catch(e){}}};return(0,z.jsxs)("div",{className:"h-full overflow-auto px-4 pb-12 text-sm",children:[(0,z.jsxs)("div",{className:"relative flex flex-col items-center px-16 py-6 text-center",children:[(0,z.jsx)("div",{className:"absolute left-0 top-6",children:(0,z.jsx)(ee.z,{color:"neutral",onClick:p,children:(0,z.jsx)(et.L7,{className:"icon-md"})})}),null!=b&&(0,z.jsx)("div",{className:"absolute right-0 top-6",children:(0,z.jsx)(ee.z,{color:"neutral",onClick:function(){window.confirm("Are you sure you want to delete this action?")&&(d(function(e){return tN(tN({},e),{},{tools:e.tools.filter(function(e){return e.type!==w.qK.JIT_PLUGIN||e.metadata.domain!==f})})}),p())},className:"text-red-500",children:(0,z.jsx)(et.a_,{className:"icon-md"})})}),(0,z.jsx)("div",{className:"text-xl font-medium",children:y?"Add actions":"Edit actions"}),(0,z.jsx)("div",{className:"text-sm text-token-text-tertiary",children:"Let your GPT retrieve information or take actions outside of ChatGPT."}),(0,z.jsx)("div",{className:"text-sm text-token-text-tertiary",children:(0,z.jsx)("a",{href:"https://help.openai.com/en/articles/8554397-creating-a-gpt",target:"_blank",rel:"noreferrer",className:"font-medium",children:"Learn more."})})]}),(0,z.jsxs)(e3,{className:"relative",children:[(0,z.jsx)(e9,{label:"Authentication"}),(0,z.jsx)(ea,{onClick:function(){O(!0)},content:function(e){switch(e){case $.Jv.None:return"None";case $.Jv.OAuth:return"OAuth";case $.Jv.ServiceHTTP:return"API Key"}}(null!==(i=null==b?void 0:null===(o=b.metadata)||void 0===o?void 0:null===(a=o.auth)||void 0===a?void 0:a.type)&&void 0!==i?i:$.Jv.None),button:(0,z.jsx)("button",{color:"neutral",className:"flex items-center gap-2 px-3",children:(0,z.jsx)(et.RR,{className:"icon-sm"})})}),k&&(0,z.jsx)(tz,{jitPluginTool:b,onUpdateTool:function(e){switch(e.type){case $.Jv.None:S({auth:{type:$.Jv.None}});break;case $.Jv.OAuth:var t=e.oauth_client_id,n=e.oauth_client_secret;S({auth:(0,X.Z)(e,tj),oauth_client_id:t,oauth_client_secret:n});break;case $.Jv.ServiceHTTP:var r=e.api_key;S({auth:(0,X.Z)(e,tw),api_key:r})}},onClose:function(){O(!1)}})]}),(0,z.jsxs)("div",{children:[(0,z.jsxs)("div",{className:"mb-1 flex h-8 items-center justify-between",children:[(0,z.jsx)("label",{className:"font-medium text-token-text-primary",children:"Schema"}),(0,z.jsx)("div",{className:"flex items-center",children:I?(0,z.jsx)(tO,{onImport:function(e){Z(e)},onClose:function(){_(!1)}}):(0,z.jsxs)("div",{className:"flex items-center gap-2",children:[(0,z.jsx)(ek.cY,{color:"neutral",onClick:function(){_(!0)},children:"Import from URL"}),(0,z.jsx)(el,{onSelectExample:function(e){S({raw_spec:e})}})]})})]}),(0,z.jsxs)("div",{className:"mb-8 overflow-hidden rounded-lg border border-token-border-light",children:[(0,z.jsxs)("div",{className:"relative",children:[(0,z.jsx)("textarea",{value:P,onChange:function(e){S({raw_spec:e.target.value})},spellCheck:!1,placeholder:"Enter your OpenAPI schema here",className:"block h-96 w-full border-none bg-transparent p-2 font-mono text-xs text-token-text-primary"}),(0,z.jsx)("div",{className:"absolute bottom-2 right-2 flex gap-2",children:""!==P?(0,z.jsx)(ek.cY,{onClick:function(){Z(P)},children:"Format"}):(0,z.jsxs)(ek.cY,{as:"a",to:tk,openNewTab:!0,children:[(0,z.jsx)(en.Z,{id:"gizmo.actions.actionsGptHelp",defaultMessage:"Get help from ActionsGPT"}),(0,z.jsx)(et.fe,{className:"icon-md"})]})})]}),null!=A&&(null==A?void 0:A.length)>0&&(0,z.jsx)("div",{className:"border-t border-token-border-light p-2 text-red-500",children:A.map(function(e,t){return(0,z.jsx)("div",{children:e},t)})})]})]}),null!=M&&(0,z.jsx)(tI,{validationResponse:M}),(0,z.jsxs)("div",{className:"mt-4",children:[(0,z.jsx)(e9,{label:"Privacy policy",description:"Privacy policy is required for all public GPTs."}),(0,z.jsx)(ei.Z,{name:"privacyPolicyUrl",value:null!==(s=null==b?void 0:null===(l=b.metadata)||void 0===l?void 0:l.privacy_policy_url)&&void 0!==s?s:"",placeholder:"https://api.example-weather-app.com/privacy",onChange:function(e){S({privacy_policy_url:e.target.value})}})]})]})}var tS=n(87942),tG=n(22189),tM=n(36530),tE=n(37178),tD=n(34490);function tA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function tZ(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tA(Object(n),!0).forEach(function(t){(0,b.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tA(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function tL(e){window.history.length>1?e.back():e.push((0,V.L7)())}function tU(e){var t,n,r,i=e.gizmo,o=e.publishedGizmo,a=e.promoteGizmo,l=e.setStep,c=e.showActionsModal,u=(0,q.useState)(!1),d=u[0],p=u[1],m=(0,L.ec)(L.F_.isBusinessWorkspace),f=(0,Q.Z)(),h=(0,q.useState)((0,g.Sg)(i)?m?G.Zz.Workspace:G.Zz.Marketplace:i.sharingRecipient),x=h[0],b=h[1],y=(0,g.WL)(),P=y.data,N=y.isLoading,k=(0,q.useState)(null!=o&&o.gizmo.display.categories.length>0?o.gizmo.display.categories[0]:void 0),O=k[0],C=k[1];(0,q.useEffect)(function(){C(null==o?void 0:o.gizmo.display.categories[0])},[null==o?void 0:o.gizmo.display.categories]);var I=(0,q.useState)(void 0),_=I[0],S=I[1],M=(0,q.useRef)((0,K.throttle)(function(e,t){return T.U.generateCategory(e,t)},1e3)),E=null!=P&&P.is_verified?void 0:f.formatMessage(tQ.displayNameRequiredHint);x!==G.Zz.Marketplace||null==E||N||b(G.Zz.Link);var Z=m&&!(null!==(t=i.allowedSharingRecipients)&&void 0!==t&&t.some(function(e){return e===G.Zz.Link})),U=eX(i,x,O),R=U.includes(s.MissingPublicActionPrivacyPolicyURL),V=i.tools.find(function(e){return e.type===w.qK.JIT_PLUGIN&&!e.metadata.privacy_policy_url}),W=(0,L.ec)(function(e){return e.currentWorkspace}),B=(0,D.hz)(),H=(0,g.Z1)();(0,q.useEffect)(function(){if(!(null!=B&&B.includes(A.L0.GizmoStore))){C("other");return}var e=!0;return(0,v.Z)(j().mark(function t(){var n;return j().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!(null!=O)){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,M.current(i.name,i.instructions);case 5:n=t.sent,e&&null==O&&(n?C(n.id):S(!0)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),e&&null==O&&S(!0);case 12:case"end":return t.stop()}},t,null,[[0,9]])}))(),function(){e=!1}},[i.instructions,i.name,B,O]);var J=null==B?void 0:B.includes(A.L0.GizmoStore);return(0,z.jsxs)("div",{children:[(0,z.jsx)("div",{className:"mb-2 text-sm font-medium text-token-text-tertiary",children:(0,z.jsx)(en.Z,tZ({},tQ.publishTo))}),(0,z.jsxs)("div",{className:"flex flex-col gap-3 text-sm",children:[(0,z.jsxs)(F.fC,{value:x,onValueChange:function(e){return b(e)},className:"space-y-2",children:[i.allowedSharingRecipients&&i.allowedSharingRecipients.map(function(e,t){return(0,z.jsx)(ek.Xb,{value:e,disabled:e===G.Zz.Marketplace&&null!=E,tooltipText:e===G.Zz.Marketplace?(null!=E?E:J)?f.formatMessage(tQ.publicSharingHintStoreEnabled):f.formatMessage(tQ.publicSharingHint):void 0,label:(0,tr.MI)(e,W,f)},t)}),Z&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(ek.Xb,{value:G.Zz.Link,disabled:!0,tooltipText:f.formatMessage(tQ.workspaceDisabledHint),label:(0,tr.MI)(G.Zz.Link,W,f)}),(0,z.jsx)(ek.Xb,{value:G.Zz.Marketplace,disabled:!0,tooltipText:f.formatMessage(tQ.workspaceDisabledHint),label:(0,tr.MI)(G.Zz.Marketplace,W,f)})]})]}),R&&(0,z.jsx)("div",{className:"text-xs text-red-500",children:(0,z.jsx)(en.Z,tZ(tZ({},tQ.actionNeedsPrivacyPolicyURL),{},{values:{fixlink:function(e){return(0,z.jsx)("button",{onClick:function(){c(null==V?void 0:V.metadata.action_id)},className:"underline",children:e})}}}))}),x!==G.Zz.Private&&(0,z.jsx)(tD.QT,{gizmoAvatar:i.profilePictureUrl,gizmoName:i.name,canEdit:!0}),x===G.Zz.Marketplace&&(null==B?void 0:B.includes(A.L0.GizmoStore))&&(_?(0,z.jsx)("div",{className:"text-xs text-red-500",children:(0,z.jsx)(en.Z,tZ({},tQ.categoryError))}):(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)("div",{className:"flex items-center justify-between text-sm font-medium text-token-text-tertiary",children:[(0,z.jsx)(en.Z,tZ({},tQ.categoryLabel)),(0,z.jsx)(ep.u,{label:(0,z.jsx)("span",{className:"w-36 text-xs",children:(0,z.jsx)(en.Z,tZ({},tQ.categoryLabelTooltip))}),side:"top",children:(0,z.jsx)(et.VX,{className:"icon-sm"})})]}),(0,z.jsx)(tJ,{category:null!=O?O:"",categories:null!==(n=null===(r=H.data)||void 0===r?void 0:r.categories)&&void 0!==n?n:[],setCategory:C})]})),(0,z.jsx)(ek.cY,{color:"primary",disabled:U.length>0,loading:d,onClick:(0,v.Z)(j().mark(function e(){var t;return j().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(!0),e.next=4,a(x,O);case 4:if(null!=(t=e.sent)){e.next=7;break}return e.abrupt("return");case 7:1===t.gizmo.live_version?Y().push((0,g.m_)(t)):l({type:"published",publishedGizmo:t});case 8:return e.prev=8,p(!1),e.finish(8);case 11:case"end":return e.stop()}},e,null,[[0,,8,11]])})),className:"w-full",children:(0,z.jsx)(en.Z,tZ({},tQ.privacyConfirm))})]})]})}function tR(e){return"".concat("https://chat.openai.com").concat((0,g.m_)(e))}function tV(e){var t=e.publishedGizmo,n=tR(t);return(0,z.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,z.jsx)("div",{className:"font-medium",children:(0,z.jsx)(en.Z,tZ({},tQ.publishedTitle))}),(0,z.jsxs)("div",{className:"flex gap-1 rounded bg-token-surface-secondary px-2 py-1",children:[(0,z.jsx)("div",{className:"text-ellipsis break-all line-clamp-1",children:n}),(0,z.jsx)("button",{onClick:function(){(0,tE.S)(tR(t))},className:"text-token-text-secondary transition hover:text-token-text-primary",children:(0,z.jsx)(et.dS,{className:"icon-sm"})})]}),(0,z.jsx)(ek.cY,{color:"primary",as:"link",to:n,className:"w-full",children:(0,z.jsx)(en.Z,tZ({},tQ.viewGPT))})]})}function tq(e){var t=e.gizmo,n=e.publishedGizmo,r=e.promoteGizmo,i=e.showActionsModal,o=(0,q.useState)({type:"privacy"}),a=o[0],s=o[1];return(0,z.jsx)("div",{className:"w-60 rounded-lg border border-token-border-medium bg-token-surface-primary p-4 text-sm",children:"privacy"===a.type?(0,z.jsx)(tU,{gizmo:t,publishedGizmo:n,promoteGizmo:r,setStep:s,showActionsModal:i}):(0,z.jsx)(tV,{publishedGizmo:a.publishedGizmo})})}function tF(e){var t,n=e.gizmo,r=e.publishedGizmo,i=e.isLoading,o=e.isUploadingProfilePic,a=e.isGeneratingProfilePic,l=e.promoteGizmo,c=e.hasUnpublishedChanges,u=e.showActionsModal,d=null!=n?eX(n):[],p=(0,Q.Z)();(null==n||i)&&d.push(s.Loading),o&&d.push(s.UploadingProfilePic),a&&d.push(s.GeneratingProfilePic);var m=(0,g.Sg)(n);return(0,z.jsxs)(tG.fC,{modal:!0,children:[(0,z.jsx)(tG.xz,{asChild:!0,children:(0,z.jsx)(ek.cY,{color:"primary",className:"cursor-pointer whitespace-nowrap",disabled:void 0===n.id,tooltip:d.length>0?d.map(eQ).join("\n"):void 0,children:(0,z.jsxs)("div",{className:"flex items-center gap-1",children:[c&&!m?p.formatMessage(tQ.publishChanges):p.formatMessage(tQ.save),(0,z.jsx)(et.ud,{})]})})}),(0,z.jsx)(tG.h_,{children:(0,z.jsx)(tG.VY,{side:"bottom",align:"end",sideOffset:8,children:(0,z.jsx)(tq,{gizmo:n,publishedGizmo:r,promoteGizmo:l,showActionsModal:u})})})]})}function tW(e){var t=e.gizmoEditorData,n=e.publishedGizmo,r=e.revertDraft,i=(0,Q.Z)(),o=(0,q.useState)(!1),a=o[0],s=o[1],l=(0,D.hz)();return null!=l&&l.includes("debug")||(null==t?void 0:t.id)!=null?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)(ef.fC,{children:[(0,z.jsx)(ef.xz,{asChild:!0,children:(0,z.jsx)(ek.cY,{children:(0,z.jsx)(et.Yr,{className:"icon-md"})})}),(0,z.jsx)(ef.Uv,{children:(0,z.jsxs)(ef.VY,{className:"min-w-[180px] max-w-xs rounded-lg border border-gray-100 bg-token-surface-primary shadow-lg dark:border-gray-700",side:"top",align:"end",sideOffset:6,children:[null!=n&&(0,z.jsxs)(ek.UA,{onClick:function(){(0,tE.S)(tR(n))},children:[(0,z.jsx)(et.HN,{className:"icon-md"}),(0,z.jsx)(en.Z,tZ({},tQ.copyLink))]}),null!=r&&(0,z.jsxs)(ek.UA,{onClick:function(){window.confirm(i.formatMessage(tQ.revertConfirm))&&r()},children:[(0,z.jsx)(et.Nt,{className:"icon-md"}),(0,z.jsx)(en.Z,tZ({},tQ.revertMenuItem))]}),(null==l?void 0:l.includes("debug"))&&(0,z.jsxs)(ek.UA,{onClick:function(){tu.vm.toggleActiveSidebar("debug")},children:[(0,z.jsx)(et.WP,{className:"icon-md"}),"Debug (Internal only)"]}),(null==t?void 0:t.id)!=null&&(0,z.jsxs)(ek.UA,{color:"danger",onClick:function(){s(!0)},children:[(0,z.jsx)(et.a_,{className:"icon-md"}),(0,z.jsx)(en.Z,tZ({},tQ.deleteGPT))]})]})})]}),a&&(0,z.jsx)(tS.b,{gizmoId:t.id,onSuccess:function(){return tL(Y())},onClose:function(){s(!1)}})]}):null}var tB=I.Z.div(f||(f=(0,C.Z)(["flex items-center gap-1"])));function tH(e){var t=e.gizmoEditorData,n=(0,L.ec)(function(e){var t;return null===(t=e.currentWorkspace)||void 0===t?void 0:t.name});switch(t.sharingRecipient){case G.Zz.Private:return(0,z.jsxs)(tB,{children:[(0,z.jsx)(et.LX,{className:"icon-xs"}),(0,z.jsx)(en.Z,tZ({},tQ.onlyMe))]});case G.Zz.Link:return(0,z.jsxs)(tB,{children:[(0,z.jsx)(et.HN,{className:"icon-xs"}),(0,z.jsx)(en.Z,tZ({},tQ.anyoneWithLink))]});case G.Zz.Workspace:return(0,z.jsxs)(tB,{children:[(0,z.jsx)(et.oq,{className:"icon-xs"}),n]});case G.Zz.Marketplace:return(0,z.jsxs)(tB,{children:[(0,z.jsx)(et.hk,{className:"icon-xs"}),(0,z.jsx)(en.Z,tZ({},tQ.public))]})}return(0,z.jsx)("div",{})}function tK(e){var t=e.gizmoEditorData;return(0,z.jsxs)("div",{className:"flex items-center gap-2",children:[null!=t.profilePictureUrl?(0,z.jsx)(eN.Z,{isFirstParty:!1,src:t.profilePictureUrl,className:"h-8 w-8"}):(0,z.jsx)("div",{className:"h-8 w-8 rounded-full border-2 border-dashed border-token-border-medium"}),(0,z.jsxs)("div",{children:[(0,z.jsx)("div",{className:"text-sm font-medium",children:t.name||(0,z.jsx)(en.Z,tZ({},tQ.newGPT))}),(0,z.jsx)("div",{className:"text-xs text-token-text-secondary",children:(0,g.Sg)(t)?(0,z.jsxs)("div",{className:"flex items-center gap-1",children:[(0,z.jsx)("div",{className:"h-1.5 w-1.5 rounded-full bg-token-text-tertiary"}),(0,z.jsx)(en.Z,tZ({},tQ.draft))]}):(0,z.jsxs)("div",{className:"flex items-center gap-1",children:[(0,z.jsx)("div",{className:"h-1.5 w-1.5 rounded-full bg-brand-green"}),(0,z.jsx)(en.Z,tZ({},tQ.published))," \xb7 ",(0,z.jsx)(tH,{gizmoEditorData:t})]})})]})]})}function tJ(e){var t=e.category,n=e.categories,r=e.setCategory;return(0,z.jsxs)(tM.fC,{value:t,onValueChange:function(e){return r(e)},children:[(0,z.jsx)(tM.xz,{className:"flex justify-between rounded-xl bg-gray-50 p-3 font-medium dark:bg-gray-900",children:t?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(tM.B4,{}),(0,z.jsx)(tM.JO,{children:(0,z.jsx)(et.ud,{})})]}):(0,z.jsx)("div",{className:"flex w-full justify-center",children:(0,z.jsx)(M.Z,{})})}),(0,z.jsx)(tM.h_,{children:(0,z.jsx)(tM.VY,{className:"h-64 w-[var(--radix-select-trigger-width)] rounded-xl border bg-white p-1 py-2 dark:border-gray-600 dark:bg-gray-800",position:"popper",sideOffset:2,children:(0,z.jsx)("div",{className:"overflow-y-auto",children:n.map(function(e){return(0,z.jsxs)(tM.ck,{className:"flex w-full cursor-pointer justify-between rounded-lg p-2 pl-4 text-sm font-medium hover:bg-gray-50 dark:hover:bg-gray-700",value:e.id,children:[(0,z.jsx)(tM.eT,{children:e.title}),(0,z.jsx)(tM.wU,{className:"text-green-600",children:(0,z.jsx)(et.oS,{})})]},e.id)})})})})]})}function tY(e){var t=e.gizmoEditorData,n=e.isLoading,r=e.isUploadingProfilePic,i=e.isGeneratingProfilePic,o=e.publishedGizmo,a=e.promoteGizmo,s=e.revertDraft,l=e.draftMessage,c=e.className,u=e.hasUnpublishedChanges,d=e.showActionsModal;return(0,z.jsxs)("div",{className:(0,H.default)("relative flex h-14 w-full items-center justify-between gap-2 border-b border-token-border-medium px-3",c),children:[(0,z.jsxs)("div",{className:"flex items-center gap-2",children:[(0,z.jsx)("a",{className:"cursor-pointer text-token-text-primary",onClick:function(){return tL(Y())},children:(0,z.jsx)(et.L7,{className:"icon-lg"})}),(0,z.jsx)(tK,{gizmoEditorData:t})]}),(0,z.jsxs)("div",{className:"flex items-center gap-2",children:[l,(0,z.jsx)(tW,{gizmoEditorData:t,publishedGizmo:o,revertDraft:s}),(0,z.jsx)(tF,{gizmo:t,publishedGizmo:o,isLoading:n,isUploadingProfilePic:r,isGeneratingProfilePic:i,promoteGizmo:a,hasUnpublishedChanges:u,showActionsModal:d})]})]})}var tQ=(0,es.vU)({privacyConfirm:{id:"gizmo.confirmPublish",defaultMessage:"Confirm"},workspaceDisabledHint:{id:"gizmo.workspaceDisabledHint",defaultMessage:"Your workspace administrator has disabled this setting"},publicSharingHint:{id:"gizmo.publicSharingHint",defaultMessage:"This GPT may appear in the GPT Store (coming soon)"},publicSharingHintStoreEnabled:{id:"gizmo.publicSharingHintStoreEnabled",defaultMessage:"Your GPT will appear in the Explore GPTs page"},displayNameRequiredHint:{id:"gizmo.displayNameRequiredHint",defaultMessage:"To publish your GPTs to the Explore GPTs page, set up your builder profile."},save:{id:"gizmo.save",defaultMessage:"Save"},publishChanges:{id:"gizmo.publishChanges",defaultMessage:"Update"},deleteGPT:{id:"gizmo.delete",defaultMessage:"Delete GPT"},actionNeedsPrivacyPolicyURL:{id:"gizmo.actionNeedsPrivacyPolicyURL",defaultMessage:"Public actions require valid privacy policy URLs. Click <fixlink>here</fixlink> to update."},publishTo:{id:"gizmo.publishTo",defaultMessage:"Publish to"},publishedTitle:{id:"gizmo.publishedTitle",defaultMessage:"Published!"},viewGPT:{id:"gizmo.viewGPT",defaultMessage:"View GPT"},revertMenuItem:{id:"gizmo.revertMenuItem",defaultMessage:"Revert..."},onlyMe:{id:"gizmo.onlyMe",defaultMessage:"Only me"},anyoneWithLink:{id:"gizmo.anyoneWithLink",defaultMessage:"Anyone with a link"},public:{id:"gizmo.public",defaultMessage:"Everyone"},newGPT:{id:"gizmo.newGPT",defaultMessage:"New GPT"},draft:{id:"gizmo.draft",defaultMessage:"Draft"},published:{id:"gizmo.published",defaultMessage:"Published"},revertConfirm:{id:"gizmo.revertConfirm",defaultMessage:"Are you sure you want to revert to the last saved version?"},copyLink:{id:"gizmo.copyLink",defaultMessage:"Copy link"},categoryLabel:{id:"gizmo.categoryLabel",defaultMessage:"Category"},categoryLabelTooltip:{id:"gizmo.categoryLabelTooltip",defaultMessage:"Your GPT may appear in this category on the Explore page"},categoryError:{id:"gizmo.categoryError",defaultMessage:"Error generating category"}});function tX(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function t$(e){var t=function(e,t){var n=e.response,r=(0,U.Ot)(e);if(!Array.isArray(n))return r;var i=(0,K.compact)(n.map(function(e){if("value_error.any_str.max_length"===e.type)switch(e.loc[1]){case"display":switch(e.loc[2]){case"name":return t.formatMessage(tn.nameTooLong,{length:e.ctx.limit_value});case"description":return t.formatMessage(tn.descriptionTooLong,{length:e.ctx.limit_value});case"welcome_message":return t.formatMessage(tn.welcomeMessageTooLong,{length:e.ctx.limit_value})}break;case"instructions":return t.formatMessage(tn.instructionsTooLong,{length:e.ctx.limit_value})}if("string"==typeof e.msg)return e.msg}));return i.length>0?i.join("\n"):r}(e.upsertDraftError,(0,Q.Z)());return(0,z.jsxs)("div",{className:"flex items-center gap-2 text-red-500",children:[(0,z.jsx)("div",{children:(0,z.jsx)(en.Z,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tX(Object(n),!0).forEach(function(t){(0,b.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tX(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},t1.errorSavingDraft))}),null!=t&&(0,z.jsx)(ep.u,{label:t,children:(0,z.jsx)(eg.H33,{className:"icon-sm"})})]})}function t0(e){var t=e.isSavingDraft,n=e.hasUnpublishedChanges,r=e.upsertDraftError,i=e.className;return r instanceof U.Q0?(0,z.jsx)(t$,{upsertDraftError:r}):n?(0,z.jsxs)("div",{className:(0,H.default)("flex items-center gap-2",i),children:[(0,z.jsx)("span",{className:"text-token-text-secondary",children:"Unpublished changes"}),(0,z.jsx)("div",{className:"w-4 text-token-text-tertiary",children:t&&(0,z.jsx)(M.Z,{})})]}):null}var t1=(0,es.vU)({errorSavingDraft:{id:"gizmo.errorSavingDraft",defaultMessage:"Error saving draft"}}),t2=n(86178);function t3(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return t5(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return t5(e,t)}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function t5(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function t4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function t8(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?t4(Object(n),!0).forEach(function(t){(0,b.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):t4(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function t9(){return(t9=(0,v.Z)(j().mark(function e(t){var n,r,i,o,a,s,l,c,u;return j().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=t3(t);try{for(r.s();!(i=r.n()).done;)if(o=i.value,"gizmo_editor.generate_profile_pic"===o.author.name&&"multimodal_text"===o.content.content_type){a=t3(o.content.parts);try{for(a.s();!(s=a.n()).done;)l=s.value,"object"==typeof l&&"asset_pointer"in l&&(n=l)}catch(e){a.e(e)}finally{a.f()}}}catch(e){r.e(e)}finally{r.f()}if(!(null!=n)){e.next=9;break}return c=(0,eP.Iy)(n.asset_pointer),e.next=6,e_.ZP.getFileDownloadLink(c);case 6:if((u=e.sent).status!==w.KF.Success){e.next=9;break}return e.abrupt("return",{id:c,permalink:u.download_url});case 9:case"end":return e.stop()}},e)}))).apply(this,arguments)}function t6(){return(t6=(0,v.Z)(j().mark(function e(t,n,r){var i,o,a,s,l,c,u,d,p,m,f,h,g;return j().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s=(a=function(e,t){for(var n=Z.tQ.getThreadCurrentLeafId(e),r=Z.tQ.getTree(e),i=[],o=r.getNodeByIdOrMessageId(n);null!=o&&(null==t||o.id!==t);)i.unshift(o.message),o=""!==o.parentId?r.getNodeByIdOrMessageId(o.parentId):void 0;return i}(n,r)).filter(function(e){return"gizmo_editor.update_behavior"===e.recipient}).flatMap(function(e){return"text"===e.content.content_type?e.content.parts:"code"===e.content.content_type?[e.content.text]:[]}).map(function(e){return JSON.parse(e)}).reduce(function(e,t){return t8(t8({},e),t)},{}),e.next=4,function(e){return t9.apply(this,arguments)}(a);case 4:if(l=e.sent,!((0,K.isEmpty)(s)&&null==l)){e.next=7;break}return e.abrupt("return");case 7:if(c=s.name,u=s.context,d=s.description,p=s.welcome_message,m=s.profile_pic_file_id,f=s.prompt_starters,!(null!=m)){e.next=20;break}return e.prev=9,e.next=12,e_.ZP.getFileDownloadLink(m,t.id);case 12:(h=e.sent).status===w.KF.Success&&(l={id:m,permalink:h.download_url}),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(9),console.error("Error while retrieving profile pic in update: ".concat(e.t0)),E.m.warning("Something went wrong updating your GPT's profile picture.",{duration:3});case 20:return g={name:"string"==typeof c?c:void 0,description:"string"==typeof d?d:void 0,instructions:"string"==typeof u?u:void 0,welcomeMessage:"string"==typeof p?p:void 0,promptStarters:Array.isArray(f)?f:void 0,profilePictureId:null===(i=l)||void 0===i?void 0:i.id,profilePictureUrl:null===(o=l)||void 0===o?void 0:o.permalink},e.abrupt("return",(0,K.pickBy)(g,function(e){return null!=e}));case 22:case"end":return e.stop()}},e,null,[[9,16]])}))).apply(this,arguments)}function t7(e,t,n,r){var i,o,a,s,l,c,u,d,p,m,f,h,g,v,x=n.current,b=r.current;if(!(0,K.isEqual)(x,b)){var y={};x.name!==(null==b?void 0:b.name)&&(y.name=x.name),(null!==(i=x.description)&&void 0!==i?i:"")!==(null!==(o=null==b?void 0:b.description)&&void 0!==o?o:"")&&(y.description=null!==(h=x.description)&&void 0!==h?h:""),x.instructions!==(null!==(a=null==b?void 0:b.instructions)&&void 0!==a?a:"")&&(y.context=null!==(g=x.instructions)&&void 0!==g?g:""),(null!==(s=x.welcomeMessage)&&void 0!==s?s:"")!==(null!==(l=null==b?void 0:b.welcomeMessage)&&void 0!==l?l:"")&&(y.welcome_message=null!==(v=x.welcomeMessage)&&void 0!==v?v:"");var j=new Set(null!==(c=null==b?void 0:null===(u=b.files)||void 0===u?void 0:u.map(function(e){return e.file_id}))&&void 0!==c?c:[]),w=new Set(null!==(d=null===(p=x.files)||void 0===p?void 0:p.map(function(e){return e.file_id}))&&void 0!==d?d:[]),P=(null!==(m=x.files)&&void 0!==m?m:[]).filter(function(e){return!j.has(e.file_id)}),N=(null!==(f=null==b?void 0:b.files)&&void 0!==f?f:[]).filter(function(e){return!w.has(e.file_id)});if(!(0,K.isEmpty)(y)||0!==P.length||0!==N.length){var k=[];if(!(0,K.isEmpty)(y)){var T="Explicitly update the GPT's behavior to the following exact fields:\n\n    ".concat(JSON.stringify(y,null,2),'\n\n    "Do not call update_behavior yet. Instead, use these updated fields as the GPT\'s current behavior, and in the next call to update_behavior, incorporate these changes."\n    ');k.push(t2.Cv.getTextAsMessage(T,$.uU.System))}N.length>0&&k.push(t2.Cv.getTextAsMessage("The user has removed the following files from the GPT. You can no longer reference these files: ".concat(N.map(function(e){return e.file_id}).join(", ")),$.uU.System)),P.length>0&&k.push(t2.Cv.getTextAsMessage("The user is adding these files to the GPT. The GPT may reference these files. The file IDs are: ".concat(P.map(function(e){return e.file_id}).join(", ")),$.uU.System,{attachments:P.map(function(e){return{id:e.file_id,name:e.name,size:e.size}})})),k.length>0&&Z.tQ.updateTree(e,function(e){var n,r=e.getNodeByIdOrMessageId(t).parentId,i=t3(k);try{for(i.s();!(n=i.n()).done;){var o=n.value,a=(0,tf.Z)();e.insertNodeBefore(t,{id:a,children:[],parentId:r,message:o,metadata:{isClientCreatedSystemMessage:!0}}),r=a}}catch(e){i.e(e)}finally{i.f()}})}}}var ne=n(14402);function nt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function nn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nt(Object(n),!0).forEach(function(t){(0,b.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nt(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var nr=q.memo(function(e){var t=e.gizmoEditorData,n=e.updateGizmo,r=e.clientThreadId,i=e.completionCallbackResponse,o=e.gizmoEditorDataRef,a=e.magicMakerBehaviorOverrides,s=e.magicMakerConversationGizmoEditorDataRef,l=e.requireGizmoId;(0,Z.ax)(r);var c=(0,Z.UL)(r),u=null==t.id,d=null!=t.id&&""!==t.name&&null!=t.description&&""!==t.instructions&&null!=t.profilePictureUrl,p=(0,q.useState)(u?'Hi! I\'ll help you build a new GPT. You can say something like, "make a creative who helps generate visuals for new products" or "make a software engineer who helps format my code."\n\nWhat would you like to make?':d?"Welcome back! Is there anything ".concat(t.name," should be doing better? Anything you'd like to change?"):"You're back! Let's continue where we left off...")[0];(0,q.useEffect)(function(){Z.tQ.getOrInitThread(r);var e=Z.tQ.getTree(r);if(!e.findNode(function(e){var t;return e.message.author.role===$.uU.User||(null===(t=e.metadata)||void 0===t?void 0:t.isClientCreatedSystemMessage)===!0})&&(Z.tQ.deleteNodesByFilter(r,function(e){var t;return(null===(t=e.metadata)||void 0===t?void 0:t.isPlaceholderTemplateAssistantWelcomeMessage)===!0}),null!=p&&0!==p.length)){var t=Z.tQ.getThreadCurrentLeafId(r);if(e.hasNodeOrMessageId(t)){var n=(0,tf.Z)();Z.tQ.updateTree(r,function(e){e.addNode(n,p,t,$.uU.Assistant,{isPlaceholderTemplateAssistantWelcomeMessage:!0})}),Z.tQ.setThreadCurrentLeafId(r,n)}}},[r,p]),(0,q.useEffect)(function(){(0,Z.Zz)(r)&&Z.iN.hasThread(r)&&c.lastModelUsed!==eI.Mw&&(Z.tQ.getOrInitThread(r),Z.tQ.updateInitialThreadDataForNewThread(r,eI.Mw,[]))},[r,c,c.lastModelUsed]);var m=(0,q.useMemo)(function(){return{gizmoEditorData:t,gizmoId:t.id,mode:"magic",behaviorOverrides:a,getGizmoId:l}},[l,t,a]),f=(0,ne.gF)(function(e){return e.files.filter(function(e){return e.status===ej.X.Ready&&null!=e.gizmoId})}),h=(0,q.useCallback)(function(e,t){!function(e,t,n){if(0!==n.length){var r=(0,tf.Z)(),i="The user is uploading files in their next message. If you need to reference these in calls to update_behavior, you will use the following File ID(s), in order: ".concat(n.map(function(e){return'"'.concat(e.fileId,'"')}).join(", "));Z.tQ.updateTree(e,function(e){var n=e.getNodeByIdOrMessageId(t).parentId;e.insertNodeBefore(t,{id:r,children:[],parentId:n,message:t2.Cv.getTextAsMessage(i,$.uU.System),metadata:{isClientCreatedSystemMessage:!0}})})}}(e,t,f),t7(e,t,o,s),function(e,t){for(var n="Remember, you should be calling either update_behavior or generate_profile_pic after most messages from the user. Your personality should be neutral and separate from the GPT you are creating.",r=Z.tQ.getThreadCurrentLeafId(e),i=Z.tQ.getTree(e),o=i.getNodeByIdOrMessageId(r);null!=o&&o.message.author.role!==$.uU.User;){if("text"===o.message.content.content_type&&o.message.content.parts[0]===n)return;o=""!==o.parentId?i.getNodeByIdOrMessageId(o.parentId):void 0}Z.tQ.updateTree(e,function(e){var r=e.getNodeByIdOrMessageId(t).parentId;e.insertNodeBefore(t,{id:(0,tf.Z)(),children:[],parentId:r,message:t2.Cv.getTextAsMessage(n,$.uU.System,{exclude_after_next_user_message:!0}),metadata:{isClientCreatedSystemMessage:!0}})})}(e,t),n(function(e){var t;return nn(nn({},e),{},{files:[].concat((0,x.Z)(null!==(t=e.files)&&void 0!==t?t:[]),(0,x.Z)((0,K.compact)(f.map(function(e){var t;return null!=e.fileId&&{file_id:e.fileId,name:e.file.name,size:e.file.size,type:e.file.type,last_modified:e.file.lastModified,file_size_tokens:null===(t=e.fileSpec)||void 0===t?void 0:t.fileTokenSize}}))))})}),s.current=(0,K.cloneDeep)(o.current)},[o,s,f,n]),g=(0,tu.tN)(function(e){return e.activeSidebar});return(0,z.jsx)(tg.D.Provider,{value:m,children:(0,z.jsxs)("div",{className:"relative flex h-full grow overflow-auto",children:[(0,z.jsx)("div",{className:"grow",children:(0,z.jsx)(tl.Z,{initialThreadData:c,clientThreadId:r,onCompletionFinished:i,preRequestCompletion:h,hideHeader:!0,prependThreadChildren:(0,z.jsx)("div",{className:"h-8"})})}),"debug"===g&&(0,z.jsx)(ts.fv,{clientThreadId:r,slideOver:!1,onClose:function(){return tu.vm.toggleActiveSidebar("debug")},isOpen:!0})]})})});function ni(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function no(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ni(Object(n),!0).forEach(function(t){(0,b.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ni(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function na(e){var t=e.value,n=e.label;return(0,z.jsx)(F.ck,{value:t,className:"text-md w-1/3 flex-grow rounded-lg border-token-border-light p-1.5 font-medium text-token-text-tertiary transition hover:text-token-text-primary radix-state-checked:border radix-state-checked:bg-token-surface-primary radix-state-checked:text-token-text-primary radix-state-checked:shadow-[0_0_2px_rgba(0,0,0,.03)] radix-state-checked:dark:bg-token-surface-secondary md:w-1/2",children:n})}function ns(e){var t=e.className,n=e.editorTab,r=e.setEditorTab;return(0,z.jsxs)(F.fC,{className:(0,H.default)("flex w-full overflow-hidden rounded-xl bg-token-surface-secondary p-1.5 dark:bg-token-surface-tertiary md:w-1/2",t),value:n,onValueChange:function(e){r(e)},children:[(0,z.jsx)(na,{value:h.MAGIC_MAKER,label:"Create"}),(0,z.jsx)(na,{value:h.ADVANCED,label:"Configure"}),(0,z.jsx)("div",{className:"flex w-1/3 md:hidden",children:(0,z.jsx)(na,{value:h.PREVIEW,label:"Preview"})})]})}(o=h||(h={})).MAGIC_MAKER="magic",o.ADVANCED="advanced",o.PREVIEW="preview";var nl={id:void 0,instructions:"",name:"",description:"",profilePictureId:void 0,profilePictureUrl:void 0,welcomeMessage:"",promptStarters:[],tools:[{type:w.qK.DALLE}],files:[],trainingDisabled:!1,liveVersion:0},nc=no(no({},nl),{},{tools:[].concat((0,x.Z)(nl.tools),[{type:w.qK.BROWSER}])});function nu(e){var t,n,r,i,o,a;return{id:e.gizmo.id,instructions:e.gizmo.instructions,name:e.gizmo.display.name,description:null!==(t=e.gizmo.display.description)&&void 0!==t?t:"",profilePictureId:void 0,profilePictureUrl:null!==(n=e.gizmo.display.profile_picture_url)&&void 0!==n?n:void 0,welcomeMessage:null!==(r=e.gizmo.display.welcome_message)&&void 0!==r?r:"",promptStarters:null!==(i=e.gizmo.display.prompt_starters)&&void 0!==i?i:[],tools:e.tools,files:e.files,trainingDisabled:null!==(o=e.gizmo.training_disabled)&&void 0!==o&&o,sharingRecipient:e.gizmo.share_recipient,allowedSharingRecipients:e.gizmo.allowed_sharing_recipients,liveVersion:null!==(a=e.gizmo.live_version)&&void 0!==a?a:0}}var nd=function(e){var t,n,r,i,o,a,s,l,c,u,d,p,m=e.gizmo,f=e.onNewGizmoId,x=(0,P.C)(A.L0.BrowseAvailable),b=(0,Q.Z)(),y=(0,q.useRef)(null!=m?nu(m):x?nc:nl),w=(0,q.useRef)(m),N=(0,q.useRef)(y.current),k=(0,q.useState)(function(){return y.current}),T=k[0],C=k[1],I=(0,q.useState)(function(){return(0,Z.OX)()}),_=I[0];I[1];var M=(0,g.kg)(y.current.id).data,L=(0,g.N_)(),R=L.isPending,V=L.error,F=(0,g.ZJ)(),J=(0,q.useMemo)(function(){var e,t,n,r,i,o;return null!=M&&(!(T.name===M.gizmo.display.name&&T.description===M.gizmo.display.description&&T.welcomeMessage===M.gizmo.display.welcome_message&&T.instructions===M.gizmo.instructions&&(i=T.tools,o=M.tools,i.length===o.length&&i.every(function(e){return o.some(function(t){return t.type===e.type})}))&&(0,K.isEqual)(null!==(e=null===(t=T.files)||void 0===t?void 0:t.map(function(e){return e.file_id}))&&void 0!==e?e:[],null!==(n=null===(r=M.files)||void 0===r?void 0:r.map(function(e){return e.file_id}))&&void 0!==n?n:[]))||T.profilePictureUrl!=M.gizmo.display.profile_picture_url)},[T,M]),Y=(null==m?void 0:null===(p=m.gizmo.appeal_info)||void 0===p?void 0:p.state.kind)==="appeal_sent",X=(t=(0,v.Z)(j().mark(function e(){var t,n,r,i,o;return j().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=y.current,e.prev=1,e.next=4,L.mutateAsync({editorData:t,gizmoId:t.id});case 4:return n=e.sent,w.current=n,null==y.current.id&&(r=n.gizmo.id,y.current=no(no({},y.current),{},{id:r,allowedSharingRecipients:n.gizmo.allowed_sharing_recipients}),C(y.current),null==f||f(r)),e.abrupt("return",n);case 10:throw e.prev=10,e.t0=e.catch(1),o=null!==(i=(0,U.Ot)(e.t0))&&void 0!==i?i:b.formatMessage(t1.errorSavingDraft),E.m.warning(o,{duration:2}),e.t0;case 15:case"end":return e.stop()}},e,null,[[1,10]])})),function(){return t.apply(this,arguments)}),ee=(0,q.useRef)(),et=(n=(0,v.Z)(j().mark(function e(){return j().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(null!=y.current.id)){e.next=2;break}return e.abrupt("return",y.current.id);case 2:return null==ee.current&&(ee.current=X().then(function(e){return e.gizmo.id}).catch(function(e){throw ee.current=void 0,e})),e.abrupt("return",ee.current);case 4:case"end":return e.stop()}},e)})),function(){return n.apply(this,arguments)}),en=(0,q.useState)(function(){return(0,K.debounce)(function(){return X()},2e3,{trailing:!0})})[0];function er(e){var t,n,r="function"==typeof e?e(y.current):(t=y.current,null==(n=e)?t:(n=function e(t){return"object"==typeof t&&null!=t?Array.isArray(t)?t.map(e):Object.fromEntries(Object.entries(t).map(function(t){var n=(0,eE.Z)(t,2);return[n[0],e(n[1])]})):null===t?void 0:t}(n),eY(eY({},t),n)));(0,K.isEqual)(r,y.current)||(y.current=r,C(y.current),en())}var ei=(0,q.useState)(function(){return{context_message:function(e){var t,n,r,i,o,a=new Set,s=t3(e.tools);try{for(s.s();!(o=s.n()).done;){var l=o.value;a.add(l.type)}}catch(e){s.e(e)}finally{s.f()}var c=null!==(t=e.name)&&void 0!==t?t:"",u=null!==(n=e.description)&&void 0!==n?n:"",d=null!==(r=e.instructions)&&void 0!==r?r:"",p=Array.from(a).join(","),m=null!==(i=e.welcomeMessage)&&void 0!==i?i:"",f=null!=e.profilePictureUrl;return""===c&&""===u&&""===d&&""===m?"The GPT you are about to has the following abilities: ".concat(p,"."):"This is the GPT's current set of fields:\n\nname: ".concat(c,"\n\ndescription: ").concat(u,"\n\ncontext: ").concat(d,"\n\nabilities: ").concat(p,"\n\nwelcome_message: ").concat(m,"\n\n").concat(f?"The GPT has a profile picture.":"This GPT does not have a profile picture. You must generate a profile picture when you next update your behavior.","\n")}(y.current),model_slug:"unused",enabled_tools:[{tool_id:null!=m?"gizmo_editor":"gizmo_creator"}]}})[0],eo=(0,q.useRef)(),ea=(r=(0,v.Z)(j().mark(function e(t){var n;return j().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t){e.next=3;break}return eO(!1),e.abrupt("return");case 3:return e.prev=3,e.next=6,function(e,t,n){return t6.apply(this,arguments)}(y.current,t,eo.current);case 6:null!=(n=e.sent)&&(er(n),N.current=(0,K.cloneDeep)(y.current)),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(3),console.error(e.t0),E.m.warning("Something went wrong generating your GPT",{duration:3});case 14:return e.prev=14,eo.current=Z.tQ.getThreadCurrentLeafId(t),eO(!1),e.finish(14);case 18:case"end":return e.stop()}},e,null,[[3,10,14,18]])})),function(e){return r.apply(this,arguments)}),es=(Z.tQ.getOrInitThread(_),i=(0,th.Z)(_,void 0,K.noop,K.noop,ea,[]),o=(0,D.hz)(),a=(0,v.Z)(j().mark(function e(t,n,r){var a,s,l,c,u,d,p,m,f;return j().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==r.length){e.next=2;break}return e.abrupt("return");case 2:a=Z.tQ.getThreadCurrentLeafId(_),s=t3(r);try{for(c=function(){var e=l.value,t=(0,tf.Z)();Z.tQ.updateTree(_,function(n){n.addNodeToEnd(a,{id:t,children:[],parentId:a,message:t2.Cv.getTextAsMessage(e,$.uU.System),metadata:{isClientCreatedSystemMessage:!0}})}),Z.tQ.setThreadCurrentLeafId(_,t),a=t},s.s();!(l=s.n()).done;)c()}catch(e){s.e(e)}finally{s.f()}if(u=a,t7(_,u,t,n),d={conversationMode:{kind:$.OL.GizmoMagicCreate,gizmo_id:t.current.id,behavior_overrides:ei}},p=[eI.S.GPT_4],m=(0,tm.Rr)(o,p,$.OL.GizmoMagicCreate),f=null,!m){e.next=15;break}return e.next=14,tm.ZP.getEnforcementToken(p);case 14:f=e.sent;case 15:i({model:eI.Mw,completionType:$.Os.Next,parentNodeId:u,metadata:{},focusOnNewCompletion:!0,arkoseToken:f,preflightTime:0,completionMetadata:d});case 16:case"end":return e.stop()}},e)})),function(e,t,n){return a.apply(this,arguments)}),el=(0,q.useState)(!1),ec=el[0],eu=el[1],ed=(0,q.useState)(!1),ep=ed[0],em=ed[1],ef=(0,q.useState)(void 0),eh=ef[0],eg=ef[1],ev=(s=(0,v.Z)(j().mark(function e(t,n){var r,i,o,a;return j().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!((r=eX(y.current,t,n)).length>0)){e.next=4;break}return E.m.warning("Could not save GPT:\n\n".concat(r.map(function(e){return"- ".concat(eQ(e))}).join("\n")),{duration:3}),e.abrupt("return");case 4:return e.next=6,X();case 6:return o=(i=e.sent).gizmo.id,e.prev=8,eg({gizmoId:o,sharingRecipient:t}),e.next=12,F.mutateAsync({gizmoId:i.gizmo.id,data:{sharingRecipient:t,categories:null==n?void 0:[n]}},{onSuccess:function(e){B.E.setQueryData((0,g.Vw)(o).queryKey,e),B.E.invalidateQueries({queryKey:["gizmos"]}),B.E.invalidateQueries({queryKey:["gizmo",{gizmoId:o}]}),B.E.invalidateQueries({queryKey:["gizmo","userActionSettings",{gizmoId:o}]})}});case 12:return a=e.sent,e.abrupt("return",a);case 16:e.prev=16,e.t0=e.catch(8),e.t0 instanceof G.DC?(eu(!!e.t0.response.is_flagged_brand_name),em(!0)):(console.error(e.t0),E.m.warning("Error saving GPT",{duration:2}));case 19:case"end":return e.stop()}},e,null,[[8,16]])})),function(e,t){return s.apply(this,arguments)}),ex=L.isPending||F.isPending,eb=(0,q.useState)(function(){var e=W.m.getItem(W.F.GizmoEditorTab);return Object.values(h).includes(e)?e:h.MAGIC_MAKER}),ey=eb[0],ej=eb[1],ew=(c=(l=(0,q.useState)({width:null,height:null}))[0],u=l[1],(0,q.useLayoutEffect)(function(){var e=function(){u({width:window.innerWidth,height:window.innerHeight})};return e(),window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}},[]),c).width;(0,q.useEffect)(function(){null!=ew&&ew>=768&&ey===h.PREVIEW&&ej(h.MAGIC_MAKER)},[ew,ey]);var eP=(0,q.useState)(!1),eN=eP[0],ek=eP[1],eT=(0,q.useState)(!1),ez=eT[0],eO=eT[1],eC=(0,q.useState)(void 0),e_=eC[0],eS=eC[1];return(0,z.jsxs)("div",{className:"flex h-screen w-full flex-col items-center",children:[(0,z.jsx)(tY,{gizmoEditorData:T,isLoading:ex,hasUnpublishedChanges:J,isUploadingProfilePic:eN,isGeneratingProfilePic:ez,publishedGizmo:M,promoteGizmo:(d=(0,v.Z)(j().mark(function e(t,n){var r;return j().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev(t,n);case 2:return r=e.sent,y.current=no(no({},y.current),{},{sharingRecipient:t}),C(y.current),W.m.setItem(W.F.GizmoEditorTab,ey),e.abrupt("return",r);case 7:case"end":return e.stop()}},e)})),function(e,t){return d.apply(this,arguments)}),revertDraft:null!=M&&J?function(){var e=B.E.getQueryData((0,g.Vw)(y.current.id).queryKey);if(null!=e){var t=nu(e);y.current=t,C(t),X()}}:void 0,draftMessage:(0,z.jsx)(t0,{hasUnpublishedChanges:J,isSavingDraft:R,upsertDraftError:V,className:"text-sm"}),showActionsModal:function(e){eS(e)},className:"flex-shrink-0"}),Y&&m&&(0,z.jsx)(O,{gizmoId:m.gizmo.id}),ep&&eh&&(0,z.jsx)(S,{isFlaggedBrandName:ec,onClose:function(){return em(!1)}}),(0,z.jsxs)("div",{className:"relative flex w-full grow overflow-hidden",children:[(0,z.jsx)("div",{className:"flex w-full justify-center md:w-1/2",children:(0,z.jsx)("div",{className:"h-full grow overflow-hidden",children:void 0!==e_?(0,z.jsx)(t_,{currentlyEditingActionDomain:e_,gizmoEditorData:T,updateGizmo:er,onClose:function(){eS(void 0)}}):(0,z.jsxs)("div",{className:"flex h-full flex-col px-2 pt-2",children:[(0,z.jsx)(ns,{editorTab:ey,setEditorTab:ej,className:"mb-2 flex-shrink-0 self-center"}),(0,z.jsx)("div",{className:"grow overflow-hidden",children:ey===h.MAGIC_MAKER?(0,z.jsx)("div",{className:"h-full w-full pb-5",children:(0,z.jsx)(nr,{gizmoEditorData:T,updateGizmo:er,completionCallbackResponse:ea,clientThreadId:_,gizmoEditorDataRef:y,magicMakerBehaviorOverrides:ei,magicMakerConversationGizmoEditorDataRef:N,requireGizmoId:et},_)}):ey===h.ADVANCED?(0,z.jsx)(tt,{gizmoEditorData:T,updateGizmo:er,generateProfilePic:function(){eO(!0),es(y,N,["Generate a new profile picture for this GPT using gizmo_editor generate_profile_pic. Do not prompt the user for any clarification. Do not send extra text outside of the tool function call. DO NOT CALL update_behavior or otherwise update GPT behavior in your response."])},setIsUploadingProfilePic:ek,isGeneratingProfilePic:ez,setIsGeneratingProfilePic:eO,requireGizmoId:et,onShowActionsEditor:function(e){eS(e)}}):(0,z.jsx)(ty,{gizmoEditorData:T,isSavingDraft:R,showTitle:!1})})]})})}),(0,z.jsx)("div",{className:(0,H.default)("hidden w-1/2 justify-center border-l border-token-border-medium bg-token-surface-secondary pt-4",ey!==h.PREVIEW&&"md:flex"),children:(0,z.jsx)("div",{className:"flex-grow pb-5",children:(0,z.jsx)("div",{className:"h-full",children:(0,z.jsx)(ty,{gizmoEditorData:T,isSavingDraft:R})})})})]})]})};function np(e){var t=e.businessWorkspaceId,n=e.gizmoId,r=(0,g.b9)(n,!0).data,i=(0,L.ec)(L.F_.accountUserId),o=(0,L.aF)(),a=null==o?void 0:o.id,s=null!=r&&null!=i&&null!=a&&(0,tr.k1)(r,i,a,t);return null!=r&&s?(0,z.jsx)(nd,{gizmo:r}):null}function nm(e){var t=e.onNewGizmoId;return(0,z.jsx)(nd,{gizmo:void 0,onNewGizmoId:t})}function nf(e){var t=e.gizmoId,n=e.remixSourceId,r=(0,J.useRouter)(),i=(0,D.t)(),o=(0,L.ec)(L.F_.businessWorkspaceId),a=(0,q.useRef)(void 0),s=t;return null!=t&&a.current===t&&(s=void 0),(0,R.yx)({resetThreadAction:function(){r.push("/")}}),(0,z.jsx)("div",{children:null!=i&&i.data?(0,z.jsx)("div",{children:void 0!=s?(0,z.jsx)(np,{businessWorkspaceId:o,gizmoId:s},s):(0,z.jsx)(nm,{remixSourceId:n,onNewGizmoId:function(e){a.current=e,window.history.replaceState(window.history.state,"",(0,V.AA)(e))}})}):(0,z.jsx)("div",{className:"flex min-h-screen items-center justify-center",children:(0,z.jsx)(M.Z,{})})})}var nh=n(85958),ng=!0;function nv(){var e,t=(0,D.t)();e=null==t||t.canCreateGizmos(),(0,q.useEffect)(function(){e||Y().replace((0,nh.M5)(nh.LT.NO_ACCESS),void 0,{shallow:!0})},[e]);var n=(0,J.useRouter)(),r=n.query.slug,i=r?(0,g.CR)(r):void 0,o=n.query.remixFrom,a=null==t?void 0:t.features.includes(A.PL);return((0,q.useEffect)(function(){a&&tm.ZP.initializeAndGatherData()},[a]),(0,q.useEffect)(function(){null==t||t.canCreateGizmos()||n.push("/")},[t,n]),null!=t&&t.canCreateGizmos())?(0,z.jsx)(nf,{gizmoId:i,remixSourceId:o}):null}}}]);
//# sourceMappingURL=7893-22d1a9f418c004b7.js.map